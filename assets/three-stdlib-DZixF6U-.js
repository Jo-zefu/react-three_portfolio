import{w as kn,au as Nn,av as dt,aw as zt,f as P,y as H,q as _n,ax as qe,ay as $e,az as Dt,aA as Xn,Q as te,aB as Qn,aC as jn,P as Pe,O as Oe,G as Jt,g as N,at as me,aD as Ce,aE as yt,aF as Fe,aG as Ke,C as U,aH as qt,aI as mt,v as $t,al as He,aJ as W,aK as Yn,aL as Zn,p as xe,k as en,aM as Vn,a1 as Se,aN as Wn,m as tn,aO as nn,aP as ke,aQ as zn,M as it,aa as sn,aR as rn,D as qn,aS as Ne,B as Me,aT as on,Y as an,ab as $n,ah as cn,aU as es,aV as ts,X as Je,t as Z,aW as ln,aX as Ct,aY as An,aZ as ns,a_ as ss,a$ as rs,b0 as os,b1 as gt,b2 as is,b3 as as,b4 as cs,b5 as ls,T as et,b6 as Et,r as As,s as us,b7 as hs,z as nt,ag as ps,ac as at,Z as Bs,b8 as fs,u as ds,I as ge,b9 as ms,ba as Cs,E as we}from"./three-DxNl3wwg.js";const un=parseInt(kn.replace(/\D+/g,"")),gs=un>=125?"uv1":"uv2";function Ut(A,e){if(e===Nn)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),A;if(e===dt||e===zt){let n=A.getIndex();if(n===null){const o=[],a=A.getAttribute("position");if(a!==void 0){for(let i=0;i<a.count;i++)o.push(i);A.setIndex(o),n=A.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),A}const t=n.count-2,s=[];if(n)if(e===dt)for(let o=1;o<=t;o++)s.push(n.getX(0)),s.push(n.getX(o)),s.push(n.getX(o+1));else for(let o=0;o<t;o++)o%2===0?(s.push(n.getX(o)),s.push(n.getX(o+1)),s.push(n.getX(o+2))):(s.push(n.getX(o+2)),s.push(n.getX(o+1)),s.push(n.getX(o)));s.length/3!==t&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const r=A.clone();return r.setIndex(s),r.clearGroups(),r}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),A}var X=Uint8Array,Ae=Uint16Array,Mt=Uint32Array,hn=new X([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),pn=new X([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Es=new X([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Bn=function(A,e){for(var n=new Ae(31),t=0;t<31;++t)n[t]=e+=1<<A[t-1];for(var s=new Mt(n[30]),t=1;t<30;++t)for(var r=n[t];r<n[t+1];++r)s[r]=r-n[t]<<5|t;return[n,s]},fn=Bn(hn,2),dn=fn[0],Ms=fn[1];dn[28]=258,Ms[258]=28;var Fs=Bn(pn,0),Is=Fs[0],Ft=new Ae(32768);for(var O=0;O<32768;++O){var ce=(O&43690)>>>1|(O&21845)<<1;ce=(ce&52428)>>>2|(ce&13107)<<2,ce=(ce&61680)>>>4|(ce&3855)<<4,Ft[O]=((ce&65280)>>>8|(ce&255)<<8)>>>1}var Ue=function(A,e,n){for(var t=A.length,s=0,r=new Ae(e);s<t;++s)++r[A[s]-1];var o=new Ae(e);for(s=0;s<e;++s)o[s]=o[s-1]+r[s-1]<<1;var a;if(n){a=new Ae(1<<e);var i=15-e;for(s=0;s<t;++s)if(A[s])for(var l=s<<4|A[s],u=e-A[s],c=o[A[s]-1]++<<u,h=c|(1<<u)-1;c<=h;++c)a[Ft[c]>>>i]=l}else for(a=new Ae(t),s=0;s<t;++s)A[s]&&(a[s]=Ft[o[A[s]-1]++]>>>15-A[s]);return a},_e=new X(288);for(var O=0;O<144;++O)_e[O]=8;for(var O=144;O<256;++O)_e[O]=9;for(var O=256;O<280;++O)_e[O]=7;for(var O=280;O<288;++O)_e[O]=8;var mn=new X(32);for(var O=0;O<32;++O)mn[O]=5;var Ts=Ue(_e,9,1),Ds=Ue(mn,5,1),ct=function(A){for(var e=A[0],n=1;n<A.length;++n)A[n]>e&&(e=A[n]);return e},Y=function(A,e,n){var t=e/8|0;return(A[t]|A[t+1]<<8)>>(e&7)&n},lt=function(A,e){var n=e/8|0;return(A[n]|A[n+1]<<8|A[n+2]<<16)>>(e&7)},ys=function(A){return(A/8|0)+(A&7&&1)},Gs=function(A,e,n){(n==null||n>A.length)&&(n=A.length);var t=new(A instanceof Ae?Ae:A instanceof Mt?Mt:X)(n-e);return t.set(A.subarray(e,n)),t},Rs=function(A,e,n){var t=A.length;if(!t||n&&!n.l&&t<5)return e||new X(0);var s=!e||n,r=!n||n.i;n||(n={}),e||(e=new X(t*3));var o=function(ye){var je=e.length;if(ye>je){var Ye=new X(Math.max(je*2,ye));Ye.set(e),e=Ye}},a=n.f||0,i=n.p||0,l=n.b||0,u=n.l,c=n.d,h=n.m,p=n.n,f=t*8;do{if(!u){n.f=a=Y(A,i,1);var d=Y(A,i+1,3);if(i+=3,d)if(d==1)u=Ts,c=Ds,h=9,p=5;else if(d==2){var M=Y(A,i,31)+257,F=Y(A,i+10,15)+4,b=M+Y(A,i+5,31)+1;i+=14;for(var y=new X(b),w=new X(19),v=0;v<F;++v)w[Es[v]]=Y(A,i+v*3,7);i+=F*3;for(var x=ct(w),T=(1<<x)-1,V=Ue(w,x,1),v=0;v<b;){var se=V[Y(A,i,T)];i+=se&15;var m=se>>>4;if(m<16)y[v++]=m;else{var K=0,re=0;for(m==16?(re=3+Y(A,i,3),i+=2,K=y[v-1]):m==17?(re=3+Y(A,i,7),i+=3):m==18&&(re=11+Y(A,i,127),i+=7);re--;)y[v++]=K}}var De=y.subarray(0,M),Q=y.subarray(M);h=ct(De),p=ct(Q),u=Ue(De,h,1),c=Ue(Q,p,1)}else throw"invalid block type";else{var m=ys(i)+4,C=A[m-4]|A[m-3]<<8,E=m+C;if(E>t){if(r)throw"unexpected EOF";break}s&&o(l+C),e.set(A.subarray(m,E),l),n.b=l+=C,n.p=i=E*8;continue}if(i>f){if(r)throw"unexpected EOF";break}}s&&o(l+131072);for(var Xe=(1<<h)-1,oe=(1<<p)-1,ue=i;;ue=i){var K=u[lt(A,i)&Xe],j=K>>>4;if(i+=K&15,i>f){if(r)throw"unexpected EOF";break}if(!K)throw"invalid length/literal";if(j<256)e[l++]=j;else if(j==256){ue=i,u=null;break}else{var fe=j-254;if(j>264){var v=j-257,ie=hn[v];fe=Y(A,i,(1<<ie)-1)+dn[v],i+=ie}var he=c[lt(A,i)&oe],de=he>>>4;if(!he)throw"invalid distance";i+=he&15;var Q=Is[de];if(de>3){var ie=pn[de];Q+=lt(A,i)&(1<<ie)-1,i+=ie}if(i>f){if(r)throw"unexpected EOF";break}s&&o(l+131072);for(var Qe=l+fe;l<Qe;l+=4)e[l]=e[l-Q],e[l+1]=e[l+1-Q],e[l+2]=e[l+2-Q],e[l+3]=e[l+3-Q];l=Qe}}n.l=u,n.p=ue,n.b=l,u&&(a=1,n.m=h,n.d=c,n.n=p)}while(!a);return l==e.length?e:Gs(e,0,l)},bs=new X(0),vs=function(A){if((A[0]&15)!=8||A[0]>>>4>7||(A[0]<<8|A[1])%31)throw"invalid zlib data";if(A[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Ls(A,e){return Rs((vs(A),A.subarray(2,-4)),e)}var Hs=typeof TextDecoder<"u"&&new TextDecoder,ws=0;try{Hs.decode(bs,{stream:!0}),ws=1}catch{}function Cn(A,e,n={}){const t=new P,s=new te,r=new P,o=new H,a=new H,i=new H;n.preserveMatrix=n.preserveMatrix!==void 0?n.preserveMatrix:!0,n.preservePosition=n.preservePosition!==void 0?n.preservePosition:!0,n.preserveHipPosition=n.preserveHipPosition!==void 0?n.preserveHipPosition:!1,n.useTargetMatrix=n.useTargetMatrix!==void 0?n.useTargetMatrix:!1,n.hip=n.hip!==void 0?n.hip:"hip",n.names=n.names||{};const l=e.isObject3D?e.skeleton.bones:tt(e),u=A.isObject3D?A.skeleton.bones:tt(A);let c,h,p,f,d;if(A.isObject3D?A.skeleton.pose():(n.useTargetMatrix=!0,n.preserveMatrix=!1),n.preservePosition){d=[];for(let m=0;m<u.length;m++)d.push(u[m].position.clone())}if(n.preserveMatrix){A.updateMatrixWorld(),A.matrixWorld.identity();for(let m=0;m<A.children.length;++m)A.children[m].updateMatrixWorld(!0)}if(n.offsets){c=[];for(let m=0;m<u.length;++m)h=u[m],p=n.names[h.name]||h.name,n.offsets[p]&&(h.matrix.multiply(n.offsets[p]),h.matrix.decompose(h.position,h.quaternion,h.scale),h.updateMatrixWorld()),c.push(h.matrixWorld.clone())}for(let m=0;m<u.length;++m){if(h=u[m],p=n.names[h.name]||h.name,f=gn(p,l),i.copy(h.matrixWorld),f){if(f.updateMatrixWorld(),n.useTargetMatrix?a.copy(f.matrixWorld):(a.copy(A.matrixWorld).invert(),a.multiply(f.matrixWorld)),r.setFromMatrixScale(a),a.scale(r.set(1/r.x,1/r.y,1/r.z)),i.makeRotationFromQuaternion(s.setFromRotationMatrix(a)),A.isObject3D){const C=u.indexOf(h),E=c?c[C]:o.copy(A.skeleton.boneInverses[C]).invert();i.multiply(E)}i.copyPosition(a)}h.parent&&h.parent.isBone?(h.matrix.copy(h.parent.matrixWorld).invert(),h.matrix.multiply(i)):h.matrix.copy(i),n.preserveHipPosition&&p===n.hip&&h.matrix.setPosition(t.set(0,h.position.y,0)),h.matrix.decompose(h.position,h.quaternion,h.scale),h.updateMatrixWorld()}if(n.preservePosition)for(let m=0;m<u.length;++m)h=u[m],p=n.names[h.name]||h.name,p!==n.hip&&h.position.copy(d[m]);n.preserveMatrix&&A.updateMatrixWorld(!0)}function Ps(A,e,n,t={}){t.useFirstFramePosition=t.useFirstFramePosition!==void 0?t.useFirstFramePosition:!1,t.fps=t.fps!==void 0?t.fps:30,t.names=t.names||[],e.isObject3D||(e=xs(e));const s=Math.round(n.duration*(t.fps/1e3)*1e3),r=1/t.fps,o=[],a=new _n(e),i=tt(A.skeleton),l=[];let u,c,h,p,f;a.clipAction(n).play(),a.update(0),e.updateMatrixWorld();for(let d=0;d<s;++d){const m=d*r;Cn(A,e,t);for(let C=0;C<i.length;++C)f=t.names[i[C].name]||i[C].name,h=gn(f,e.skeleton),h&&(c=i[C],p=l[C]=l[C]||{bone:c},t.hip===f&&(p.pos||(p.pos={times:new Float32Array(s),values:new Float32Array(s*3)}),t.useFirstFramePosition&&(d===0&&(u=c.position.clone()),c.position.sub(u)),p.pos.times[d]=m,c.position.toArray(p.pos.values,d*3)),p.quat||(p.quat={times:new Float32Array(s),values:new Float32Array(s*4)}),p.quat.times[d]=m,c.quaternion.toArray(p.quat.values,d*4));a.update(r),e.updateMatrixWorld()}for(let d=0;d<l.length;++d)p=l[d],p&&(p.pos&&o.push(new qe(".bones["+p.bone.name+"].position",p.pos.times,p.pos.values)),o.push(new $e(".bones["+p.bone.name+"].quaternion",p.quat.times,p.quat.values)));return a.uncacheAction(n),new Dt(n.name,-1,o)}function Os(A){const e=new Map,n=new Map,t=A.clone();return En(A,t,function(s,r){e.set(r,s),n.set(s,r)}),t.traverse(function(s){if(!s.isSkinnedMesh)return;const r=s,o=e.get(s),a=o.skeleton.bones;r.skeleton=o.skeleton.clone(),r.bindMatrix.copy(o.bindMatrix),r.skeleton.bones=a.map(function(i){return n.get(i)}),r.bind(r.skeleton,r.bindMatrix)}),t}function gn(A,e){for(let n=0,t=tt(e);n<t.length;n++)if(A===t[n].name)return t[n]}function tt(A){return Array.isArray(A)?A:A.bones}function xs(A){const e=new Xn(A.bones[0]);return e.skeleton=A,e}function En(A,e,n){n(A,e);for(let t=0;t<A.children.length;t++)En(A.children[t],e.children[t],n)}const jr={retarget:Cn,retargetClip:Ps,clone:Os};var Ss=Object.defineProperty,Js=(A,e,n)=>e in A?Ss(A,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):A[e]=n,Us=(A,e,n)=>(Js(A,e+"",n),n);class Ks{constructor(){Us(this,"_listeners")}addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const t=this._listeners;t[e]===void 0&&(t[e]=[]),t[e].indexOf(n)===-1&&t[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const t=this._listeners;return t[e]!==void 0&&t[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const s=this._listeners[e];if(s!==void 0){const r=s.indexOf(n);r!==-1&&s.splice(r,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const t=this._listeners[e.type];if(t!==void 0){e.target=this;const s=t.slice(0);for(let r=0,o=s.length;r<o;r++)s[r].call(this,e);e.target=null}}}var ks=Object.defineProperty,Ns=(A,e,n)=>e in A?ks(A,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):A[e]=n,I=(A,e,n)=>(Ns(A,typeof e!="symbol"?e+"":e,n),n);const Ve=new Qn,Kt=new jn,_s=Math.cos(70*(Math.PI/180)),kt=(A,e)=>(A%e+e)%e;class Yr extends Ks{constructor(e,n){super(),I(this,"object"),I(this,"domElement"),I(this,"enabled",!0),I(this,"target",new P),I(this,"minDistance",0),I(this,"maxDistance",1/0),I(this,"minZoom",0),I(this,"maxZoom",1/0),I(this,"minPolarAngle",0),I(this,"maxPolarAngle",Math.PI),I(this,"minAzimuthAngle",-1/0),I(this,"maxAzimuthAngle",1/0),I(this,"enableDamping",!1),I(this,"dampingFactor",.05),I(this,"enableZoom",!0),I(this,"zoomSpeed",1),I(this,"enableRotate",!0),I(this,"rotateSpeed",1),I(this,"enablePan",!0),I(this,"panSpeed",1),I(this,"screenSpacePanning",!0),I(this,"keyPanSpeed",7),I(this,"zoomToCursor",!1),I(this,"autoRotate",!1),I(this,"autoRotateSpeed",2),I(this,"reverseOrbit",!1),I(this,"reverseHorizontalOrbit",!1),I(this,"reverseVerticalOrbit",!1),I(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),I(this,"mouseButtons",{LEFT:me.ROTATE,MIDDLE:me.DOLLY,RIGHT:me.PAN}),I(this,"touches",{ONE:Ce.ROTATE,TWO:Ce.DOLLY_PAN}),I(this,"target0"),I(this,"position0"),I(this,"zoom0"),I(this,"_domElementKeyEvents",null),I(this,"getPolarAngle"),I(this,"getAzimuthalAngle"),I(this,"setPolarAngle"),I(this,"setAzimuthalAngle"),I(this,"getDistance"),I(this,"getZoomScale"),I(this,"listenToKeyEvents"),I(this,"stopListenToKeyEvents"),I(this,"saveState"),I(this,"reset"),I(this,"update"),I(this,"connect"),I(this,"dispose"),I(this,"dollyIn"),I(this,"dollyOut"),I(this,"getScale"),I(this,"setScale"),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=B=>{let g=kt(B,2*Math.PI),D=u.phi;D<0&&(D+=2*Math.PI),g<0&&(g+=2*Math.PI);let L=Math.abs(g-D);2*Math.PI-L<L&&(g<D?g+=2*Math.PI:D+=2*Math.PI),c.phi=g-D,t.update()},this.setAzimuthalAngle=B=>{let g=kt(B,2*Math.PI),D=u.theta;D<0&&(D+=2*Math.PI),g<0&&(g+=2*Math.PI);let L=Math.abs(g-D);2*Math.PI-L<L&&(g<D?g+=2*Math.PI:D+=2*Math.PI),c.theta=g-D,t.update()},this.getDistance=()=>t.object.position.distanceTo(t.target),this.listenToKeyEvents=B=>{B.addEventListener("keydown",rt),this._domElementKeyEvents=B},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",rt),this._domElementKeyEvents=null},this.saveState=()=>{t.target0.copy(t.target),t.position0.copy(t.object.position),t.zoom0=t.object.zoom},this.reset=()=>{t.target.copy(t.target0),t.object.position.copy(t.position0),t.object.zoom=t.zoom0,t.object.updateProjectionMatrix(),t.dispatchEvent(s),t.update(),i=a.NONE},this.update=(()=>{const B=new P,g=new P(0,1,0),D=new te().setFromUnitVectors(e.up,g),L=D.clone().invert(),J=new P,z=new te,ae=2*Math.PI;return function(){const St=t.object.position;D.setFromUnitVectors(e.up,g),L.copy(D).invert(),B.copy(St).sub(t.target),B.applyQuaternion(D),u.setFromVector3(B),t.autoRotate&&i===a.NONE&&re(se()),t.enableDamping?(u.theta+=c.theta*t.dampingFactor,u.phi+=c.phi*t.dampingFactor):(u.theta+=c.theta,u.phi+=c.phi);let q=t.minAzimuthAngle,$=t.maxAzimuthAngle;isFinite(q)&&isFinite($)&&(q<-Math.PI?q+=ae:q>Math.PI&&(q-=ae),$<-Math.PI?$+=ae:$>Math.PI&&($-=ae),q<=$?u.theta=Math.max(q,Math.min($,u.theta)):u.theta=u.theta>(q+$)/2?Math.max(q,u.theta):Math.min($,u.theta)),u.phi=Math.max(t.minPolarAngle,Math.min(t.maxPolarAngle,u.phi)),u.makeSafe(),t.enableDamping===!0?t.target.addScaledVector(p,t.dampingFactor):t.target.add(p),t.zoomToCursor&&x||t.object.isOrthographicCamera?u.radius=he(u.radius):u.radius=he(u.radius*h),B.setFromSpherical(u),B.applyQuaternion(L),St.copy(t.target).add(B),t.object.matrixAutoUpdate||t.object.updateMatrix(),t.object.lookAt(t.target),t.enableDamping===!0?(c.theta*=1-t.dampingFactor,c.phi*=1-t.dampingFactor,p.multiplyScalar(1-t.dampingFactor)):(c.set(0,0,0),p.set(0,0,0));let Re=!1;if(t.zoomToCursor&&x){let be=null;if(t.object instanceof Pe&&t.object.isPerspectiveCamera){const ve=B.length();be=he(ve*h);const Ze=ve-be;t.object.position.addScaledVector(w,Ze),t.object.updateMatrixWorld()}else if(t.object.isOrthographicCamera){const ve=new P(v.x,v.y,0);ve.unproject(t.object),t.object.zoom=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom/h)),t.object.updateProjectionMatrix(),Re=!0;const Ze=new P(v.x,v.y,0);Ze.unproject(t.object),t.object.position.sub(Ze).add(ve),t.object.updateMatrixWorld(),be=B.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),t.zoomToCursor=!1;be!==null&&(t.screenSpacePanning?t.target.set(0,0,-1).transformDirection(t.object.matrix).multiplyScalar(be).add(t.object.position):(Ve.origin.copy(t.object.position),Ve.direction.set(0,0,-1).transformDirection(t.object.matrix),Math.abs(t.object.up.dot(Ve.direction))<_s?e.lookAt(t.target):(Kt.setFromNormalAndCoplanarPoint(t.object.up,t.target),Ve.intersectPlane(Kt,t.target))))}else t.object instanceof Oe&&t.object.isOrthographicCamera&&(Re=h!==1,Re&&(t.object.zoom=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom/h)),t.object.updateProjectionMatrix()));return h=1,x=!1,Re||J.distanceToSquared(t.object.position)>l||8*(1-z.dot(t.object.quaternion))>l?(t.dispatchEvent(s),J.copy(t.object.position),z.copy(t.object.quaternion),Re=!1,!0):!1}})(),this.connect=B=>{t.domElement=B,t.domElement.style.touchAction="none",t.domElement.addEventListener("contextmenu",Ot),t.domElement.addEventListener("pointerdown",wt),t.domElement.addEventListener("pointercancel",Ge),t.domElement.addEventListener("wheel",Pt)},this.dispose=()=>{var B,g,D,L,J,z;t.domElement&&(t.domElement.style.touchAction="auto"),(B=t.domElement)==null||B.removeEventListener("contextmenu",Ot),(g=t.domElement)==null||g.removeEventListener("pointerdown",wt),(D=t.domElement)==null||D.removeEventListener("pointercancel",Ge),(L=t.domElement)==null||L.removeEventListener("wheel",Pt),(J=t.domElement)==null||J.ownerDocument.removeEventListener("pointermove",st),(z=t.domElement)==null||z.ownerDocument.removeEventListener("pointerup",Ge),t._domElementKeyEvents!==null&&t._domElementKeyEvents.removeEventListener("keydown",rt)};const t=this,s={type:"change"},r={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let i=a.NONE;const l=1e-6,u=new Jt,c=new Jt;let h=1;const p=new P,f=new N,d=new N,m=new N,C=new N,E=new N,M=new N,F=new N,b=new N,y=new N,w=new P,v=new N;let x=!1;const T=[],V={};function se(){return 2*Math.PI/60/60*t.autoRotateSpeed}function K(){return Math.pow(.95,t.zoomSpeed)}function re(B){t.reverseOrbit||t.reverseHorizontalOrbit?c.theta+=B:c.theta-=B}function De(B){t.reverseOrbit||t.reverseVerticalOrbit?c.phi+=B:c.phi-=B}const Q=(()=>{const B=new P;return function(D,L){B.setFromMatrixColumn(L,0),B.multiplyScalar(-D),p.add(B)}})(),Xe=(()=>{const B=new P;return function(D,L){t.screenSpacePanning===!0?B.setFromMatrixColumn(L,1):(B.setFromMatrixColumn(L,0),B.crossVectors(t.object.up,B)),B.multiplyScalar(D),p.add(B)}})(),oe=(()=>{const B=new P;return function(D,L){const J=t.domElement;if(J&&t.object instanceof Pe&&t.object.isPerspectiveCamera){const z=t.object.position;B.copy(z).sub(t.target);let ae=B.length();ae*=Math.tan(t.object.fov/2*Math.PI/180),Q(2*D*ae/J.clientHeight,t.object.matrix),Xe(2*L*ae/J.clientHeight,t.object.matrix)}else J&&t.object instanceof Oe&&t.object.isOrthographicCamera?(Q(D*(t.object.right-t.object.left)/t.object.zoom/J.clientWidth,t.object.matrix),Xe(L*(t.object.top-t.object.bottom)/t.object.zoom/J.clientHeight,t.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),t.enablePan=!1)}})();function ue(B){t.object instanceof Pe&&t.object.isPerspectiveCamera||t.object instanceof Oe&&t.object.isOrthographicCamera?h=B:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),t.enableZoom=!1)}function j(B){ue(h/B)}function fe(B){ue(h*B)}function ie(B){if(!t.zoomToCursor||!t.domElement)return;x=!0;const g=t.domElement.getBoundingClientRect(),D=B.clientX-g.left,L=B.clientY-g.top,J=g.width,z=g.height;v.x=D/J*2-1,v.y=-(L/z)*2+1,w.set(v.x,v.y,1).unproject(t.object).sub(t.object.position).normalize()}function he(B){return Math.max(t.minDistance,Math.min(t.maxDistance,B))}function de(B){f.set(B.clientX,B.clientY)}function Qe(B){ie(B),F.set(B.clientX,B.clientY)}function ye(B){C.set(B.clientX,B.clientY)}function je(B){d.set(B.clientX,B.clientY),m.subVectors(d,f).multiplyScalar(t.rotateSpeed);const g=t.domElement;g&&(re(2*Math.PI*m.x/g.clientHeight),De(2*Math.PI*m.y/g.clientHeight)),f.copy(d),t.update()}function Ye(B){b.set(B.clientX,B.clientY),y.subVectors(b,F),y.y>0?j(K()):y.y<0&&fe(K()),F.copy(b),t.update()}function Rn(B){E.set(B.clientX,B.clientY),M.subVectors(E,C).multiplyScalar(t.panSpeed),oe(M.x,M.y),C.copy(E),t.update()}function bn(B){ie(B),B.deltaY<0?fe(K()):B.deltaY>0&&j(K()),t.update()}function vn(B){let g=!1;switch(B.code){case t.keys.UP:oe(0,t.keyPanSpeed),g=!0;break;case t.keys.BOTTOM:oe(0,-t.keyPanSpeed),g=!0;break;case t.keys.LEFT:oe(t.keyPanSpeed,0),g=!0;break;case t.keys.RIGHT:oe(-t.keyPanSpeed,0),g=!0;break}g&&(B.preventDefault(),t.update())}function Gt(){if(T.length==1)f.set(T[0].pageX,T[0].pageY);else{const B=.5*(T[0].pageX+T[1].pageX),g=.5*(T[0].pageY+T[1].pageY);f.set(B,g)}}function Rt(){if(T.length==1)C.set(T[0].pageX,T[0].pageY);else{const B=.5*(T[0].pageX+T[1].pageX),g=.5*(T[0].pageY+T[1].pageY);C.set(B,g)}}function bt(){const B=T[0].pageX-T[1].pageX,g=T[0].pageY-T[1].pageY,D=Math.sqrt(B*B+g*g);F.set(0,D)}function Ln(){t.enableZoom&&bt(),t.enablePan&&Rt()}function Hn(){t.enableZoom&&bt(),t.enableRotate&&Gt()}function vt(B){if(T.length==1)d.set(B.pageX,B.pageY);else{const D=ot(B),L=.5*(B.pageX+D.x),J=.5*(B.pageY+D.y);d.set(L,J)}m.subVectors(d,f).multiplyScalar(t.rotateSpeed);const g=t.domElement;g&&(re(2*Math.PI*m.x/g.clientHeight),De(2*Math.PI*m.y/g.clientHeight)),f.copy(d)}function Lt(B){if(T.length==1)E.set(B.pageX,B.pageY);else{const g=ot(B),D=.5*(B.pageX+g.x),L=.5*(B.pageY+g.y);E.set(D,L)}M.subVectors(E,C).multiplyScalar(t.panSpeed),oe(M.x,M.y),C.copy(E)}function Ht(B){const g=ot(B),D=B.pageX-g.x,L=B.pageY-g.y,J=Math.sqrt(D*D+L*L);b.set(0,J),y.set(0,Math.pow(b.y/F.y,t.zoomSpeed)),j(y.y),F.copy(b)}function wn(B){t.enableZoom&&Ht(B),t.enablePan&&Lt(B)}function Pn(B){t.enableZoom&&Ht(B),t.enableRotate&&vt(B)}function wt(B){var g,D;t.enabled!==!1&&(T.length===0&&((g=t.domElement)==null||g.ownerDocument.addEventListener("pointermove",st),(D=t.domElement)==null||D.ownerDocument.addEventListener("pointerup",Ge)),Un(B),B.pointerType==="touch"?Sn(B):On(B))}function st(B){t.enabled!==!1&&(B.pointerType==="touch"?Jn(B):xn(B))}function Ge(B){var g,D,L;Kn(B),T.length===0&&((g=t.domElement)==null||g.releasePointerCapture(B.pointerId),(D=t.domElement)==null||D.ownerDocument.removeEventListener("pointermove",st),(L=t.domElement)==null||L.ownerDocument.removeEventListener("pointerup",Ge)),t.dispatchEvent(o),i=a.NONE}function On(B){let g;switch(B.button){case 0:g=t.mouseButtons.LEFT;break;case 1:g=t.mouseButtons.MIDDLE;break;case 2:g=t.mouseButtons.RIGHT;break;default:g=-1}switch(g){case me.DOLLY:if(t.enableZoom===!1)return;Qe(B),i=a.DOLLY;break;case me.ROTATE:if(B.ctrlKey||B.metaKey||B.shiftKey){if(t.enablePan===!1)return;ye(B),i=a.PAN}else{if(t.enableRotate===!1)return;de(B),i=a.ROTATE}break;case me.PAN:if(B.ctrlKey||B.metaKey||B.shiftKey){if(t.enableRotate===!1)return;de(B),i=a.ROTATE}else{if(t.enablePan===!1)return;ye(B),i=a.PAN}break;default:i=a.NONE}i!==a.NONE&&t.dispatchEvent(r)}function xn(B){if(t.enabled!==!1)switch(i){case a.ROTATE:if(t.enableRotate===!1)return;je(B);break;case a.DOLLY:if(t.enableZoom===!1)return;Ye(B);break;case a.PAN:if(t.enablePan===!1)return;Rn(B);break}}function Pt(B){t.enabled===!1||t.enableZoom===!1||i!==a.NONE&&i!==a.ROTATE||(B.preventDefault(),t.dispatchEvent(r),bn(B),t.dispatchEvent(o))}function rt(B){t.enabled===!1||t.enablePan===!1||vn(B)}function Sn(B){switch(xt(B),T.length){case 1:switch(t.touches.ONE){case Ce.ROTATE:if(t.enableRotate===!1)return;Gt(),i=a.TOUCH_ROTATE;break;case Ce.PAN:if(t.enablePan===!1)return;Rt(),i=a.TOUCH_PAN;break;default:i=a.NONE}break;case 2:switch(t.touches.TWO){case Ce.DOLLY_PAN:if(t.enableZoom===!1&&t.enablePan===!1)return;Ln(),i=a.TOUCH_DOLLY_PAN;break;case Ce.DOLLY_ROTATE:if(t.enableZoom===!1&&t.enableRotate===!1)return;Hn(),i=a.TOUCH_DOLLY_ROTATE;break;default:i=a.NONE}break;default:i=a.NONE}i!==a.NONE&&t.dispatchEvent(r)}function Jn(B){switch(xt(B),i){case a.TOUCH_ROTATE:if(t.enableRotate===!1)return;vt(B),t.update();break;case a.TOUCH_PAN:if(t.enablePan===!1)return;Lt(B),t.update();break;case a.TOUCH_DOLLY_PAN:if(t.enableZoom===!1&&t.enablePan===!1)return;wn(B),t.update();break;case a.TOUCH_DOLLY_ROTATE:if(t.enableZoom===!1&&t.enableRotate===!1)return;Pn(B),t.update();break;default:i=a.NONE}}function Ot(B){t.enabled!==!1&&B.preventDefault()}function Un(B){T.push(B)}function Kn(B){delete V[B.pointerId];for(let g=0;g<T.length;g++)if(T[g].pointerId==B.pointerId){T.splice(g,1);return}}function xt(B){let g=V[B.pointerId];g===void 0&&(g=new N,V[B.pointerId]=g),g.set(B.pageX,B.pageY)}function ot(B){const g=B.pointerId===T[0].pointerId?T[1]:T[0];return V[g.pointerId]}this.dollyIn=(B=K())=>{fe(B),t.update()},this.dollyOut=(B=K())=>{j(B),t.update()},this.getScale=()=>h,this.setScale=B=>{ue(B),t.update()},this.getZoomScale=()=>K(),n!==void 0&&this.connect(n),this.update()}}function Te(A){if(typeof TextDecoder<"u")return new TextDecoder().decode(A);let e="";for(let n=0,t=A.length;n<t;n++)e+=String.fromCharCode(A[n]);try{return decodeURIComponent(escape(e))}catch{return e}}const Be="srgb",ne="srgb-linear",Nt=3001,Xs=3e3;class Zr extends yt{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new Vs(n)}),this.register(function(n){return new Ws(n)}),this.register(function(n){return new or(n)}),this.register(function(n){return new ir(n)}),this.register(function(n){return new ar(n)}),this.register(function(n){return new qs(n)}),this.register(function(n){return new $s(n)}),this.register(function(n){return new er(n)}),this.register(function(n){return new tr(n)}),this.register(function(n){return new Zs(n)}),this.register(function(n){return new nr(n)}),this.register(function(n){return new zs(n)}),this.register(function(n){return new rr(n)}),this.register(function(n){return new sr(n)}),this.register(function(n){return new js(n)}),this.register(function(n){return new cr(n)}),this.register(function(n){return new lr(n)})}load(e,n,t,s){const r=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const l=Fe.extractUrlBase(e);o=Fe.resolveURL(l,this.path)}else o=Fe.extractUrlBase(e);this.manager.itemStart(e);const a=function(l){s?s(l):console.error(l),r.manager.itemError(e),r.manager.itemEnd(e)},i=new Ke(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,function(l){try{r.parse(l,o,function(u){n(u),r.manager.itemEnd(e)},a)}catch(u){a(u)}},t,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,n,t,s){let r;const o={},a={};if(typeof e=="string")r=JSON.parse(e);else if(e instanceof ArrayBuffer)if(Te(new Uint8Array(e.slice(0,4)))===Mn){try{o[R.KHR_BINARY_GLTF]=new Ar(e)}catch(u){s&&s(u);return}r=JSON.parse(o[R.KHR_BINARY_GLTF].content)}else r=JSON.parse(Te(new Uint8Array(e)));else r=e;if(r.asset===void 0||r.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const i=new Ir(r,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});i.fileLoader.setRequestHeader(this.requestHeader);for(let l=0;l<this.pluginCallbacks.length;l++){const u=this.pluginCallbacks[l](i);u.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[u.name]=u,o[u.name]=!0}if(r.extensionsUsed)for(let l=0;l<r.extensionsUsed.length;++l){const u=r.extensionsUsed[l],c=r.extensionsRequired||[];switch(u){case R.KHR_MATERIALS_UNLIT:o[u]=new Ys;break;case R.KHR_DRACO_MESH_COMPRESSION:o[u]=new ur(r,this.dracoLoader);break;case R.KHR_TEXTURE_TRANSFORM:o[u]=new hr;break;case R.KHR_MESH_QUANTIZATION:o[u]=new pr;break;default:c.indexOf(u)>=0&&a[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}i.setExtensions(o),i.setPlugins(a),i.parse(t,s)}parseAsync(e,n){const t=this;return new Promise(function(s,r){t.parse(e,n,s,r)})}}function Qs(){let A={};return{get:function(e){return A[e]},add:function(e,n){A[e]=n},remove:function(e){delete A[e]},removeAll:function(){A={}}}}const R={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class js{constructor(e){this.parser=e,this.name=R.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,n=this.parser.json.nodes||[];for(let t=0,s=n.length;t<s;t++){const r=n[t];r.extensions&&r.extensions[this.name]&&r.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const n=this.parser,t="light:"+e;let s=n.cache.get(t);if(s)return s;const r=n.json,i=((r.extensions&&r.extensions[this.name]||{}).lights||[])[e];let l;const u=new U(16777215);i.color!==void 0&&u.setRGB(i.color[0],i.color[1],i.color[2],ne);const c=i.range!==void 0?i.range:0;switch(i.type){case"directional":l=new $t(u),l.target.position.set(0,0,-1),l.add(l.target);break;case"point":l=new mt(u),l.distance=c;break;case"spot":l=new qt(u),l.distance=c,i.spot=i.spot||{},i.spot.innerConeAngle=i.spot.innerConeAngle!==void 0?i.spot.innerConeAngle:0,i.spot.outerConeAngle=i.spot.outerConeAngle!==void 0?i.spot.outerConeAngle:Math.PI/4,l.angle=i.spot.outerConeAngle,l.penumbra=1-i.spot.innerConeAngle/i.spot.outerConeAngle,l.target.position.set(0,0,-1),l.add(l.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+i.type)}return l.position.set(0,0,0),l.decay=2,ee(l,i),i.intensity!==void 0&&(l.intensity=i.intensity),l.name=n.createUniqueName(i.name||"light_"+e),s=Promise.resolve(l),n.cache.add(t,s),s}getDependency(e,n){if(e==="light")return this._loadLight(n)}createNodeAttachment(e){const n=this,t=this.parser,r=t.json.nodes[e],a=(r.extensions&&r.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(i){return t._getNodeRef(n.cache,a,i)})}}class Ys{constructor(){this.name=R.KHR_MATERIALS_UNLIT}getMaterialType(){return He}extendParams(e,n,t){const s=[];e.color=new U(1,1,1),e.opacity=1;const r=n.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const o=r.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],ne),e.opacity=o[3]}r.baseColorTexture!==void 0&&s.push(t.assignTexture(e,"map",r.baseColorTexture,Be))}return Promise.all(s)}}class Zs{constructor(e){this.parser=e,this.name=R.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,n){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name].emissiveStrength;return r!==void 0&&(n.emissiveIntensity=r),Promise.resolve()}}class Vs{constructor(e){this.parser=e,this.name=R.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:W}extendMaterialParams(e,n){const t=this.parser,s=t.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];if(o.clearcoatFactor!==void 0&&(n.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&r.push(t.assignTexture(n,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(n.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&r.push(t.assignTexture(n,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(r.push(t.assignTexture(n,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new N(a,a)}return Promise.all(r)}}class Ws{constructor(e){this.parser=e,this.name=R.KHR_MATERIALS_DISPERSION}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:W}extendMaterialParams(e,n){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return n.dispersion=r.dispersion!==void 0?r.dispersion:0,Promise.resolve()}}class zs{constructor(e){this.parser=e,this.name=R.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:W}extendMaterialParams(e,n){const t=this.parser,s=t.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return o.iridescenceFactor!==void 0&&(n.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&r.push(t.assignTexture(n,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(n.iridescenceIOR=o.iridescenceIor),n.iridescenceThicknessRange===void 0&&(n.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(n.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(n.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&r.push(t.assignTexture(n,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(r)}}class qs{constructor(e){this.parser=e,this.name=R.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:W}extendMaterialParams(e,n){const t=this.parser,s=t.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[];n.sheenColor=new U(0,0,0),n.sheenRoughness=0,n.sheen=1;const o=s.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;n.sheenColor.setRGB(a[0],a[1],a[2],ne)}return o.sheenRoughnessFactor!==void 0&&(n.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&r.push(t.assignTexture(n,"sheenColorMap",o.sheenColorTexture,Be)),o.sheenRoughnessTexture!==void 0&&r.push(t.assignTexture(n,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(r)}}class $s{constructor(e){this.parser=e,this.name=R.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:W}extendMaterialParams(e,n){const t=this.parser,s=t.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return o.transmissionFactor!==void 0&&(n.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&r.push(t.assignTexture(n,"transmissionMap",o.transmissionTexture)),Promise.all(r)}}class er{constructor(e){this.parser=e,this.name=R.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:W}extendMaterialParams(e,n){const t=this.parser,s=t.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];n.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&r.push(t.assignTexture(n,"thicknessMap",o.thicknessTexture)),n.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return n.attenuationColor=new U().setRGB(a[0],a[1],a[2],ne),Promise.all(r)}}class tr{constructor(e){this.parser=e,this.name=R.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:W}extendMaterialParams(e,n){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return n.ior=r.ior!==void 0?r.ior:1.5,Promise.resolve()}}class nr{constructor(e){this.parser=e,this.name=R.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:W}extendMaterialParams(e,n){const t=this.parser,s=t.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];n.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&r.push(t.assignTexture(n,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return n.specularColor=new U().setRGB(a[0],a[1],a[2],ne),o.specularColorTexture!==void 0&&r.push(t.assignTexture(n,"specularColorMap",o.specularColorTexture,Be)),Promise.all(r)}}class sr{constructor(e){this.parser=e,this.name=R.EXT_MATERIALS_BUMP}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:W}extendMaterialParams(e,n){const t=this.parser,s=t.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return n.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&r.push(t.assignTexture(n,"bumpMap",o.bumpTexture)),Promise.all(r)}}class rr{constructor(e){this.parser=e,this.name=R.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:W}extendMaterialParams(e,n){const t=this.parser,s=t.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return o.anisotropyStrength!==void 0&&(n.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(n.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&r.push(t.assignTexture(n,"anisotropyMap",o.anisotropyTexture)),Promise.all(r)}}class or{constructor(e){this.parser=e,this.name=R.KHR_TEXTURE_BASISU}loadTexture(e){const n=this.parser,t=n.json,s=t.textures[e];if(!s.extensions||!s.extensions[this.name])return null;const r=s.extensions[this.name],o=n.options.ktx2Loader;if(!o){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(e,r.source,o)}}class ir{constructor(e){this.parser=e,this.name=R.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const n=this.name,t=this.parser,s=t.json,r=s.textures[e];if(!r.extensions||!r.extensions[n])return null;const o=r.extensions[n],a=s.images[o.source];let i=t.textureLoader;if(a.uri){const l=t.options.manager.getHandler(a.uri);l!==null&&(i=l)}return this.detectSupport().then(function(l){if(l)return t.loadTextureImage(e,o.source,i);if(s.extensionsRequired&&s.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return t.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class ar{constructor(e){this.parser=e,this.name=R.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const n=this.name,t=this.parser,s=t.json,r=s.textures[e];if(!r.extensions||!r.extensions[n])return null;const o=r.extensions[n],a=s.images[o.source];let i=t.textureLoader;if(a.uri){const l=t.options.manager.getHandler(a.uri);l!==null&&(i=l)}return this.detectSupport().then(function(l){if(l)return t.loadTextureImage(e,o.source,i);if(s.extensionsRequired&&s.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return t.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class cr{constructor(e){this.name=R.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const n=this.parser.json,t=n.bufferViews[e];if(t.extensions&&t.extensions[this.name]){const s=t.extensions[this.name],r=this.parser.getDependency("buffer",s.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then(function(a){const i=s.byteOffset||0,l=s.byteLength||0,u=s.count,c=s.byteStride,h=new Uint8Array(a,i,l);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,c,h,s.mode,s.filter).then(function(p){return p.buffer}):o.ready.then(function(){const p=new ArrayBuffer(u*c);return o.decodeGltfBuffer(new Uint8Array(p),u,c,h,s.mode,s.filter),p})})}else return null}}class lr{constructor(e){this.name=R.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const n=this.parser.json,t=n.nodes[e];if(!t.extensions||!t.extensions[this.name]||t.mesh===void 0)return null;const s=n.meshes[t.mesh];for(const l of s.primitives)if(l.mode!==_.TRIANGLES&&l.mode!==_.TRIANGLE_STRIP&&l.mode!==_.TRIANGLE_FAN&&l.mode!==void 0)return null;const o=t.extensions[this.name].attributes,a=[],i={};for(const l in o)a.push(this.parser.getDependency("accessor",o[l]).then(u=>(i[l]=u,i[l])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(l=>{const u=l.pop(),c=u.isGroup?u.children:[u],h=l[0].count,p=[];for(const f of c){const d=new H,m=new P,C=new te,E=new P(1,1,1),M=new Yn(f.geometry,f.material,h);for(let F=0;F<h;F++)i.TRANSLATION&&m.fromBufferAttribute(i.TRANSLATION,F),i.ROTATION&&C.fromBufferAttribute(i.ROTATION,F),i.SCALE&&E.fromBufferAttribute(i.SCALE,F),M.setMatrixAt(F,d.compose(m,C,E));for(const F in i)if(F==="_COLOR_0"){const b=i[F];M.instanceColor=new Zn(b.array,b.itemSize,b.normalized)}else F!=="TRANSLATION"&&F!=="ROTATION"&&F!=="SCALE"&&f.geometry.setAttribute(F,i[F]);xe.prototype.copy.call(M,f),this.parser.assignFinalMaterial(M),p.push(M)}return u.isGroup?(u.clear(),u.add(...p),u):p[0]}))}}const Mn="glTF",Le=12,_t={JSON:1313821514,BIN:5130562};class Ar{constructor(e){this.name=R.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(e,0,Le);if(this.header={magic:Te(new Uint8Array(e.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==Mn)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const t=this.header.length-Le,s=new DataView(e,Le);let r=0;for(;r<t;){const o=s.getUint32(r,!0);r+=4;const a=s.getUint32(r,!0);if(r+=4,a===_t.JSON){const i=new Uint8Array(e,Le+r,o);this.content=Te(i)}else if(a===_t.BIN){const i=Le+r;this.body=e.slice(i,i+o)}r+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class ur{constructor(e,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=R.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(e,n){const t=this.json,s=this.dracoLoader,r=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},i={},l={};for(const u in o){const c=It[u]||u.toLowerCase();a[c]=o[u]}for(const u in e.attributes){const c=It[u]||u.toLowerCase();if(o[u]!==void 0){const h=t.accessors[e.attributes[u]],p=Ie[h.componentType];l[c]=p.name,i[c]=h.normalized===!0}}return n.getDependency("bufferView",r).then(function(u){return new Promise(function(c,h){s.decodeDracoFile(u,function(p){for(const f in p.attributes){const d=p.attributes[f],m=i[f];m!==void 0&&(d.normalized=m)}c(p)},a,l,ne,h)})})}}class hr{constructor(){this.name=R.KHR_TEXTURE_TRANSFORM}extendTexture(e,n){return(n.texCoord===void 0||n.texCoord===e.channel)&&n.offset===void 0&&n.rotation===void 0&&n.scale===void 0||(e=e.clone(),n.texCoord!==void 0&&(e.channel=n.texCoord),n.offset!==void 0&&e.offset.fromArray(n.offset),n.rotation!==void 0&&(e.rotation=n.rotation),n.scale!==void 0&&e.repeat.fromArray(n.scale),e.needsUpdate=!0),e}}class pr{constructor(){this.name=R.KHR_MESH_QUANTIZATION}}class Fn extends hs{constructor(e,n,t,s){super(e,n,t,s)}copySampleValue_(e){const n=this.resultBuffer,t=this.sampleValues,s=this.valueSize,r=e*s*3+s;for(let o=0;o!==s;o++)n[o]=t[r+o];return n}interpolate_(e,n,t,s){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,i=a*2,l=a*3,u=s-n,c=(t-n)/u,h=c*c,p=h*c,f=e*l,d=f-l,m=-2*p+3*h,C=p-h,E=1-m,M=C-h+c;for(let F=0;F!==a;F++){const b=o[d+F+a],y=o[d+F+i]*u,w=o[f+F+a],v=o[f+F]*u;r[F]=E*b+M*y+m*w+C*v}return r}}const Br=new te;class fr extends Fn{interpolate_(e,n,t,s){const r=super.interpolate_(e,n,t,s);return Br.fromArray(r).normalize().toArray(r),r}}const _={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Ie={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Xt={9728:ns,9729:tn,9984:ss,9985:rs,9986:os,9987:nn},Qt={33071:gt,33648:is,10497:ke},At={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},It={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...un>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},le={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},dr={CUBICSPLINE:void 0,LINEAR:An,STEP:as},ut={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function mr(A){return A.DefaultMaterial===void 0&&(A.DefaultMaterial=new rn({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:cs})),A.DefaultMaterial}function pe(A,e,n){for(const t in n.extensions)A[t]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[t]=n.extensions[t])}function ee(A,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(A.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Cr(A,e,n){let t=!1,s=!1,r=!1;for(let l=0,u=e.length;l<u;l++){const c=e[l];if(c.POSITION!==void 0&&(t=!0),c.NORMAL!==void 0&&(s=!0),c.COLOR_0!==void 0&&(r=!0),t&&s&&r)break}if(!t&&!s&&!r)return Promise.resolve(A);const o=[],a=[],i=[];for(let l=0,u=e.length;l<u;l++){const c=e[l];if(t){const h=c.POSITION!==void 0?n.getDependency("accessor",c.POSITION):A.attributes.position;o.push(h)}if(s){const h=c.NORMAL!==void 0?n.getDependency("accessor",c.NORMAL):A.attributes.normal;a.push(h)}if(r){const h=c.COLOR_0!==void 0?n.getDependency("accessor",c.COLOR_0):A.attributes.color;i.push(h)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(i)]).then(function(l){const u=l[0],c=l[1],h=l[2];return t&&(A.morphAttributes.position=u),s&&(A.morphAttributes.normal=c),r&&(A.morphAttributes.color=h),A.morphTargetsRelative=!0,A})}function gr(A,e){if(A.updateMorphTargets(),e.weights!==void 0)for(let n=0,t=e.weights.length;n<t;n++)A.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){const n=e.extras.targetNames;if(A.morphTargetInfluences.length===n.length){A.morphTargetDictionary={};for(let t=0,s=n.length;t<s;t++)A.morphTargetDictionary[n[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Er(A){let e;const n=A.extensions&&A.extensions[R.KHR_DRACO_MESH_COMPRESSION];if(n?e="draco:"+n.bufferView+":"+n.indices+":"+ht(n.attributes):e=A.indices+":"+ht(A.attributes)+":"+A.mode,A.targets!==void 0)for(let t=0,s=A.targets.length;t<s;t++)e+=":"+ht(A.targets[t]);return e}function ht(A){let e="";const n=Object.keys(A).sort();for(let t=0,s=n.length;t<s;t++)e+=n[t]+":"+A[n[t]]+";";return e}function Tt(A){switch(A){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Mr(A){return A.search(/\.jpe?g($|\?)/i)>0||A.search(/^data\:image\/jpeg/)===0?"image/jpeg":A.search(/\.webp($|\?)/i)>0||A.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const Fr=new H;class Ir{constructor(e={},n={}){this.json=e,this.extensions={},this.plugins={},this.options=n,this.cache=new Qs,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let t=!1,s=!1,r=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(t=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,s=navigator.userAgent.indexOf("Firefox")>-1,r=s?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||t||s&&r<98?this.textureLoader=new en(this.options.manager):this.textureLoader=new Vn(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Ke(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,n){const t=this,s=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([t.getDependencies("scene"),t.getDependencies("animation"),t.getDependencies("camera")])}).then(function(o){const a={scene:o[0][s.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:s.asset,parser:t,userData:{}};return pe(r,a,s),ee(a,s),Promise.all(t._invokeAll(function(i){return i.afterRoot&&i.afterRoot(a)})).then(function(){for(const i of a.scenes)i.updateMatrixWorld();e(a)})}).catch(n)}_markDefs(){const e=this.json.nodes||[],n=this.json.skins||[],t=this.json.meshes||[];for(let s=0,r=n.length;s<r;s++){const o=n[s].joints;for(let a=0,i=o.length;a<i;a++)e[o[a]].isBone=!0}for(let s=0,r=e.length;s<r;s++){const o=e[s];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(t[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,n){n!==void 0&&(e.refs[n]===void 0&&(e.refs[n]=e.uses[n]=0),e.refs[n]++)}_getNodeRef(e,n,t){if(e.refs[n]<=1)return t;const s=t.clone(),r=(o,a)=>{const i=this.associations.get(o);i!=null&&this.associations.set(a,i);for(const[l,u]of o.children.entries())r(u,a.children[l])};return r(t,s),s.name+="_instance_"+e.uses[n]++,s}_invokeOne(e){const n=Object.values(this.plugins);n.push(this);for(let t=0;t<n.length;t++){const s=e(n[t]);if(s)return s}return null}_invokeAll(e){const n=Object.values(this.plugins);n.unshift(this);const t=[];for(let s=0;s<n.length;s++){const r=e(n[s]);r&&t.push(r)}return t}getDependency(e,n){const t=e+":"+n;let s=this.cache.get(t);if(!s){switch(e){case"scene":s=this.loadScene(n);break;case"node":s=this._invokeOne(function(r){return r.loadNode&&r.loadNode(n)});break;case"mesh":s=this._invokeOne(function(r){return r.loadMesh&&r.loadMesh(n)});break;case"accessor":s=this.loadAccessor(n);break;case"bufferView":s=this._invokeOne(function(r){return r.loadBufferView&&r.loadBufferView(n)});break;case"buffer":s=this.loadBuffer(n);break;case"material":s=this._invokeOne(function(r){return r.loadMaterial&&r.loadMaterial(n)});break;case"texture":s=this._invokeOne(function(r){return r.loadTexture&&r.loadTexture(n)});break;case"skin":s=this.loadSkin(n);break;case"animation":s=this._invokeOne(function(r){return r.loadAnimation&&r.loadAnimation(n)});break;case"camera":s=this.loadCamera(n);break;default:if(s=this._invokeOne(function(r){return r!=this&&r.getDependency&&r.getDependency(e,n)}),!s)throw new Error("Unknown type: "+e);break}this.cache.add(t,s)}return s}getDependencies(e){let n=this.cache.get(e);if(!n){const t=this,s=this.json[e+(e==="mesh"?"es":"s")]||[];n=Promise.all(s.map(function(r,o){return t.getDependency(e,o)})),this.cache.add(e,n)}return n}loadBuffer(e){const n=this.json.buffers[e],t=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&e===0)return Promise.resolve(this.extensions[R.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(r,o){t.load(Fe.resolveURL(n.uri,s.path),r,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(e){const n=this.json.bufferViews[e];return this.getDependency("buffer",n.buffer).then(function(t){const s=n.byteLength||0,r=n.byteOffset||0;return t.slice(r,r+s)})}loadAccessor(e){const n=this,t=this.json,s=this.json.accessors[e];if(s.bufferView===void 0&&s.sparse===void 0){const o=At[s.type],a=Ie[s.componentType],i=s.normalized===!0,l=new a(s.count*o);return Promise.resolve(new Se(l,o,i))}const r=[];return s.bufferView!==void 0?r.push(this.getDependency("bufferView",s.bufferView)):r.push(null),s.sparse!==void 0&&(r.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(r).then(function(o){const a=o[0],i=At[s.type],l=Ie[s.componentType],u=l.BYTES_PER_ELEMENT,c=u*i,h=s.byteOffset||0,p=s.bufferView!==void 0?t.bufferViews[s.bufferView].byteStride:void 0,f=s.normalized===!0;let d,m;if(p&&p!==c){const C=Math.floor(h/p),E="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+C+":"+s.count;let M=n.cache.get(E);M||(d=new l(a,C*p,s.count*p/u),M=new Wn(d,p/u),n.cache.add(E,M)),m=new ls(M,i,h%p/u,f)}else a===null?d=new l(s.count*i):d=new l(a,h,s.count*i),m=new Se(d,i,f);if(s.sparse!==void 0){const C=At.SCALAR,E=Ie[s.sparse.indices.componentType],M=s.sparse.indices.byteOffset||0,F=s.sparse.values.byteOffset||0,b=new E(o[1],M,s.sparse.count*C),y=new l(o[2],F,s.sparse.count*i);a!==null&&(m=new Se(m.array.slice(),m.itemSize,m.normalized));for(let w=0,v=b.length;w<v;w++){const x=b[w];if(m.setX(x,y[w*i]),i>=2&&m.setY(x,y[w*i+1]),i>=3&&m.setZ(x,y[w*i+2]),i>=4&&m.setW(x,y[w*i+3]),i>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return m})}loadTexture(e){const n=this.json,t=this.options,r=n.textures[e].source,o=n.images[r];let a=this.textureLoader;if(o.uri){const i=t.manager.getHandler(o.uri);i!==null&&(a=i)}return this.loadTextureImage(e,r,a)}loadTextureImage(e,n,t){const s=this,r=this.json,o=r.textures[e],a=r.images[n],i=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[i])return this.textureCache[i];const l=this.loadImageSource(n,t).then(function(u){u.flipY=!1,u.name=o.name||a.name||"",u.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(u.name=a.uri);const h=(r.samplers||{})[o.sampler]||{};return u.magFilter=Xt[h.magFilter]||tn,u.minFilter=Xt[h.minFilter]||nn,u.wrapS=Qt[h.wrapS]||ke,u.wrapT=Qt[h.wrapT]||ke,s.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[i]=l,l}loadImageSource(e,n){const t=this,s=this.json,r=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(c=>c.clone());const o=s.images[e],a=self.URL||self.webkitURL;let i=o.uri||"",l=!1;if(o.bufferView!==void 0)i=t.getDependency("bufferView",o.bufferView).then(function(c){l=!0;const h=new Blob([c],{type:o.mimeType});return i=a.createObjectURL(h),i});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(i).then(function(c){return new Promise(function(h,p){let f=h;n.isImageBitmapLoader===!0&&(f=function(d){const m=new et(d);m.needsUpdate=!0,h(m)}),n.load(Fe.resolveURL(c,r.path),f,void 0,p)})}).then(function(c){return l===!0&&a.revokeObjectURL(i),ee(c,o),c.userData.mimeType=o.mimeType||Mr(o.uri),c}).catch(function(c){throw console.error("THREE.GLTFLoader: Couldn't load texture",i),c});return this.sourceCache[e]=u,u}assignTexture(e,n,t,s){const r=this;return this.getDependency("texture",t.index).then(function(o){if(!o)return null;if(t.texCoord!==void 0&&t.texCoord>0&&(o=o.clone(),o.channel=t.texCoord),r.extensions[R.KHR_TEXTURE_TRANSFORM]){const a=t.extensions!==void 0?t.extensions[R.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const i=r.associations.get(o);o=r.extensions[R.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),r.associations.set(o,i)}}return s!==void 0&&(typeof s=="number"&&(s=s===Nt?Be:ne),"colorSpace"in o?o.colorSpace=s:o.encoding=s===Be?Nt:Xs),e[n]=o,o})}assignFinalMaterial(e){const n=e.geometry;let t=e.material;const s=n.attributes.tangent===void 0,r=n.attributes.color!==void 0,o=n.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+t.uuid;let i=this.cache.get(a);i||(i=new zn,it.prototype.copy.call(i,t),i.color.copy(t.color),i.map=t.map,i.sizeAttenuation=!1,this.cache.add(a,i)),t=i}else if(e.isLine){const a="LineBasicMaterial:"+t.uuid;let i=this.cache.get(a);i||(i=new sn,it.prototype.copy.call(i,t),i.color.copy(t.color),i.map=t.map,this.cache.add(a,i)),t=i}if(s||r||o){let a="ClonedMaterial:"+t.uuid+":";s&&(a+="derivative-tangents:"),r&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let i=this.cache.get(a);i||(i=t.clone(),r&&(i.vertexColors=!0),o&&(i.flatShading=!0),s&&(i.normalScale&&(i.normalScale.y*=-1),i.clearcoatNormalScale&&(i.clearcoatNormalScale.y*=-1)),this.cache.add(a,i),this.associations.set(i,this.associations.get(t))),t=i}e.material=t}getMaterialType(){return rn}loadMaterial(e){const n=this,t=this.json,s=this.extensions,r=t.materials[e];let o;const a={},i=r.extensions||{},l=[];if(i[R.KHR_MATERIALS_UNLIT]){const c=s[R.KHR_MATERIALS_UNLIT];o=c.getMaterialType(),l.push(c.extendParams(a,r,n))}else{const c=r.pbrMetallicRoughness||{};if(a.color=new U(1,1,1),a.opacity=1,Array.isArray(c.baseColorFactor)){const h=c.baseColorFactor;a.color.setRGB(h[0],h[1],h[2],ne),a.opacity=h[3]}c.baseColorTexture!==void 0&&l.push(n.assignTexture(a,"map",c.baseColorTexture,Be)),a.metalness=c.metallicFactor!==void 0?c.metallicFactor:1,a.roughness=c.roughnessFactor!==void 0?c.roughnessFactor:1,c.metallicRoughnessTexture!==void 0&&(l.push(n.assignTexture(a,"metalnessMap",c.metallicRoughnessTexture)),l.push(n.assignTexture(a,"roughnessMap",c.metallicRoughnessTexture))),o=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),l.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,a)})))}r.doubleSided===!0&&(a.side=qn);const u=r.alphaMode||ut.OPAQUE;if(u===ut.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,u===ut.MASK&&(a.alphaTest=r.alphaCutoff!==void 0?r.alphaCutoff:.5)),r.normalTexture!==void 0&&o!==He&&(l.push(n.assignTexture(a,"normalMap",r.normalTexture)),a.normalScale=new N(1,1),r.normalTexture.scale!==void 0)){const c=r.normalTexture.scale;a.normalScale.set(c,c)}if(r.occlusionTexture!==void 0&&o!==He&&(l.push(n.assignTexture(a,"aoMap",r.occlusionTexture)),r.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=r.occlusionTexture.strength)),r.emissiveFactor!==void 0&&o!==He){const c=r.emissiveFactor;a.emissive=new U().setRGB(c[0],c[1],c[2],ne)}return r.emissiveTexture!==void 0&&o!==He&&l.push(n.assignTexture(a,"emissiveMap",r.emissiveTexture,Be)),Promise.all(l).then(function(){const c=new o(a);return r.name&&(c.name=r.name),ee(c,r),n.associations.set(c,{materials:e}),r.extensions&&pe(s,c,r),c})}createUniqueName(e){const n=Ne.sanitizeNodeName(e||"");return n in this.nodeNamesUsed?n+"_"+ ++this.nodeNamesUsed[n]:(this.nodeNamesUsed[n]=0,n)}loadGeometries(e){const n=this,t=this.extensions,s=this.primitiveCache;function r(a){return t[R.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,n).then(function(i){return jt(i,a,n)})}const o=[];for(let a=0,i=e.length;a<i;a++){const l=e[a],u=Er(l),c=s[u];if(c)o.push(c.promise);else{let h;l.extensions&&l.extensions[R.KHR_DRACO_MESH_COMPRESSION]?h=r(l):h=jt(new Me,l,n),s[u]={primitive:l,promise:h},o.push(h)}}return Promise.all(o)}loadMesh(e){const n=this,t=this.json,s=this.extensions,r=t.meshes[e],o=r.primitives,a=[];for(let i=0,l=o.length;i<l;i++){const u=o[i].material===void 0?mr(this.cache):this.getDependency("material",o[i].material);a.push(u)}return a.push(n.loadGeometries(o)),Promise.all(a).then(function(i){const l=i.slice(0,i.length-1),u=i[i.length-1],c=[];for(let p=0,f=u.length;p<f;p++){const d=u[p],m=o[p];let C;const E=l[p];if(m.mode===_.TRIANGLES||m.mode===_.TRIANGLE_STRIP||m.mode===_.TRIANGLE_FAN||m.mode===void 0)C=r.isSkinnedMesh===!0?new on(d,E):new an(d,E),C.isSkinnedMesh===!0&&C.normalizeSkinWeights(),m.mode===_.TRIANGLE_STRIP?C.geometry=Ut(C.geometry,zt):m.mode===_.TRIANGLE_FAN&&(C.geometry=Ut(C.geometry,dt));else if(m.mode===_.LINES)C=new $n(d,E);else if(m.mode===_.LINE_STRIP)C=new cn(d,E);else if(m.mode===_.LINE_LOOP)C=new es(d,E);else if(m.mode===_.POINTS)C=new ts(d,E);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+m.mode);Object.keys(C.geometry.morphAttributes).length>0&&gr(C,r),C.name=n.createUniqueName(r.name||"mesh_"+e),ee(C,r),m.extensions&&pe(s,C,m),n.assignFinalMaterial(C),c.push(C)}for(let p=0,f=c.length;p<f;p++)n.associations.set(c[p],{meshes:e,primitives:p});if(c.length===1)return r.extensions&&pe(s,c[0],r),c[0];const h=new Je;r.extensions&&pe(s,h,r),n.associations.set(h,{meshes:e});for(let p=0,f=c.length;p<f;p++)h.add(c[p]);return h})}loadCamera(e){let n;const t=this.json.cameras[e],s=t[t.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return t.type==="perspective"?n=new Pe(Z.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):t.type==="orthographic"&&(n=new Oe(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),t.name&&(n.name=this.createUniqueName(t.name)),ee(n,t),Promise.resolve(n)}loadSkin(e){const n=this.json.skins[e],t=[];for(let s=0,r=n.joints.length;s<r;s++)t.push(this._loadNodeShallow(n.joints[s]));return n.inverseBindMatrices!==void 0?t.push(this.getDependency("accessor",n.inverseBindMatrices)):t.push(null),Promise.all(t).then(function(s){const r=s.pop(),o=s,a=[],i=[];for(let l=0,u=o.length;l<u;l++){const c=o[l];if(c){a.push(c);const h=new H;r!==null&&h.fromArray(r.array,l*16),i.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',n.joints[l])}return new ln(a,i)})}loadAnimation(e){const n=this.json,t=this,s=n.animations[e],r=s.name?s.name:"animation_"+e,o=[],a=[],i=[],l=[],u=[];for(let c=0,h=s.channels.length;c<h;c++){const p=s.channels[c],f=s.samplers[p.sampler],d=p.target,m=d.node,C=s.parameters!==void 0?s.parameters[f.input]:f.input,E=s.parameters!==void 0?s.parameters[f.output]:f.output;d.node!==void 0&&(o.push(this.getDependency("node",m)),a.push(this.getDependency("accessor",C)),i.push(this.getDependency("accessor",E)),l.push(f),u.push(d))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(i),Promise.all(l),Promise.all(u)]).then(function(c){const h=c[0],p=c[1],f=c[2],d=c[3],m=c[4],C=[];for(let E=0,M=h.length;E<M;E++){const F=h[E],b=p[E],y=f[E],w=d[E],v=m[E];if(F===void 0)continue;F.updateMatrix&&F.updateMatrix();const x=t._createAnimationTracks(F,b,y,w,v);if(x)for(let T=0;T<x.length;T++)C.push(x[T])}return new Dt(r,void 0,C)})}createNodeMesh(e){const n=this.json,t=this,s=n.nodes[e];return s.mesh===void 0?null:t.getDependency("mesh",s.mesh).then(function(r){const o=t._getNodeRef(t.meshCache,s.mesh,r);return s.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let i=0,l=s.weights.length;i<l;i++)a.morphTargetInfluences[i]=s.weights[i]}),o})}loadNode(e){const n=this.json,t=this,s=n.nodes[e],r=t._loadNodeShallow(e),o=[],a=s.children||[];for(let l=0,u=a.length;l<u;l++)o.push(t.getDependency("node",a[l]));const i=s.skin===void 0?Promise.resolve(null):t.getDependency("skin",s.skin);return Promise.all([r,Promise.all(o),i]).then(function(l){const u=l[0],c=l[1],h=l[2];h!==null&&u.traverse(function(p){p.isSkinnedMesh&&p.bind(h,Fr)});for(let p=0,f=c.length;p<f;p++)u.add(c[p]);return u})}_loadNodeShallow(e){const n=this.json,t=this.extensions,s=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const r=n.nodes[e],o=r.name?s.createUniqueName(r.name):"",a=[],i=s._invokeOne(function(l){return l.createNodeMesh&&l.createNodeMesh(e)});return i&&a.push(i),r.camera!==void 0&&a.push(s.getDependency("camera",r.camera).then(function(l){return s._getNodeRef(s.cameraCache,r.camera,l)})),s._invokeAll(function(l){return l.createNodeAttachment&&l.createNodeAttachment(e)}).forEach(function(l){a.push(l)}),this.nodeCache[e]=Promise.all(a).then(function(l){let u;if(r.isBone===!0?u=new Ct:l.length>1?u=new Je:l.length===1?u=l[0]:u=new xe,u!==l[0])for(let c=0,h=l.length;c<h;c++)u.add(l[c]);if(r.name&&(u.userData.name=r.name,u.name=o),ee(u,r),r.extensions&&pe(t,u,r),r.matrix!==void 0){const c=new H;c.fromArray(r.matrix),u.applyMatrix4(c)}else r.translation!==void 0&&u.position.fromArray(r.translation),r.rotation!==void 0&&u.quaternion.fromArray(r.rotation),r.scale!==void 0&&u.scale.fromArray(r.scale);return s.associations.has(u)||s.associations.set(u,{}),s.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const n=this.extensions,t=this.json.scenes[e],s=this,r=new Je;t.name&&(r.name=s.createUniqueName(t.name)),ee(r,t),t.extensions&&pe(n,r,t);const o=t.nodes||[],a=[];for(let i=0,l=o.length;i<l;i++)a.push(s.getDependency("node",o[i]));return Promise.all(a).then(function(i){for(let u=0,c=i.length;u<c;u++)r.add(i[u]);const l=u=>{const c=new Map;for(const[h,p]of s.associations)(h instanceof it||h instanceof et)&&c.set(h,p);return u.traverse(h=>{const p=s.associations.get(h);p!=null&&c.set(h,p)}),c};return s.associations=l(r),r})}_createAnimationTracks(e,n,t,s,r){const o=[],a=e.name?e.name:e.uuid,i=[];le[r.path]===le.weights?e.traverse(function(h){h.morphTargetInfluences&&i.push(h.name?h.name:h.uuid)}):i.push(a);let l;switch(le[r.path]){case le.weights:l=Et;break;case le.rotation:l=$e;break;case le.position:case le.scale:l=qe;break;default:switch(t.itemSize){case 1:l=Et;break;case 2:case 3:default:l=qe;break}break}const u=s.interpolation!==void 0?dr[s.interpolation]:An,c=this._getArrayFromAccessor(t);for(let h=0,p=i.length;h<p;h++){const f=new l(i[h]+"."+le[r.path],n.array,c,u);s.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(f),o.push(f)}return o}_getArrayFromAccessor(e){let n=e.array;if(e.normalized){const t=Tt(n.constructor),s=new Float32Array(n.length);for(let r=0,o=n.length;r<o;r++)s[r]=n[r]*t;n=s}return n}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(t){const s=this instanceof $e?fr:Fn;return new s(this.times,this.values,this.getValueSize()/3,t)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function Tr(A,e,n){const t=e.attributes,s=new As;if(t.POSITION!==void 0){const a=n.json.accessors[t.POSITION],i=a.min,l=a.max;if(i!==void 0&&l!==void 0){if(s.set(new P(i[0],i[1],i[2]),new P(l[0],l[1],l[2])),a.normalized){const u=Tt(Ie[a.componentType]);s.min.multiplyScalar(u),s.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const r=e.targets;if(r!==void 0){const a=new P,i=new P;for(let l=0,u=r.length;l<u;l++){const c=r[l];if(c.POSITION!==void 0){const h=n.json.accessors[c.POSITION],p=h.min,f=h.max;if(p!==void 0&&f!==void 0){if(i.setX(Math.max(Math.abs(p[0]),Math.abs(f[0]))),i.setY(Math.max(Math.abs(p[1]),Math.abs(f[1]))),i.setZ(Math.max(Math.abs(p[2]),Math.abs(f[2]))),h.normalized){const d=Tt(Ie[h.componentType]);i.multiplyScalar(d)}a.max(i)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(a)}A.boundingBox=s;const o=new us;s.getCenter(o.center),o.radius=s.min.distanceTo(s.max)/2,A.boundingSphere=o}function jt(A,e,n){const t=e.attributes,s=[];function r(o,a){return n.getDependency("accessor",o).then(function(i){A.setAttribute(a,i)})}for(const o in t){const a=It[o]||o.toLowerCase();a in A.attributes||s.push(r(t[o],a))}if(e.indices!==void 0&&!A.index){const o=n.getDependency("accessor",e.indices).then(function(a){A.setIndex(a)});s.push(o)}return ee(A,e),Tr(A,e,n),Promise.all(s).then(function(){return e.targets!==void 0?Cr(A,e.targets,n):A})}function In(A,e,n){const t=n.length-A-1;if(e>=n[t])return t-1;if(e<=n[A])return A;let s=A,r=t,o=Math.floor((s+r)/2);for(;e<n[o]||e>=n[o+1];)e<n[o]?r=o:s=o,o=Math.floor((s+r)/2);return o}function Dr(A,e,n,t){const s=[],r=[],o=[];s[0]=1;for(let a=1;a<=n;++a){r[a]=e-t[A+1-a],o[a]=t[A+a]-e;let i=0;for(let l=0;l<a;++l){const u=o[l+1],c=r[a-l],h=s[l]/(u+c);s[l]=i+u*h,i=c*h}s[a]=i}return s}function yr(A,e,n,t){const s=In(A,t,e),r=Dr(s,t,A,e),o=new nt(0,0,0,0);for(let a=0;a<=A;++a){const i=n[s-A+a],l=r[a],u=i.w*l;o.x+=i.x*u,o.y+=i.y*u,o.z+=i.z*u,o.w+=i.w*l}return o}function Gr(A,e,n,t,s){const r=[];for(let c=0;c<=n;++c)r[c]=0;const o=[];for(let c=0;c<=t;++c)o[c]=r.slice(0);const a=[];for(let c=0;c<=n;++c)a[c]=r.slice(0);a[0][0]=1;const i=r.slice(0),l=r.slice(0);for(let c=1;c<=n;++c){i[c]=e-s[A+1-c],l[c]=s[A+c]-e;let h=0;for(let p=0;p<c;++p){const f=l[p+1],d=i[c-p];a[c][p]=f+d;const m=a[p][c-1]/a[c][p];a[p][c]=h+f*m,h=d*m}a[c][c]=h}for(let c=0;c<=n;++c)o[0][c]=a[c][n];for(let c=0;c<=n;++c){let h=0,p=1;const f=[];for(let d=0;d<=n;++d)f[d]=r.slice(0);f[0][0]=1;for(let d=1;d<=t;++d){let m=0;const C=c-d,E=n-d;c>=d&&(f[p][0]=f[h][0]/a[E+1][C],m=f[p][0]*a[C][E]);const M=C>=-1?1:-C,F=c-1<=E?d-1:n-c;for(let y=M;y<=F;++y)f[p][y]=(f[h][y]-f[h][y-1])/a[E+1][C+y],m+=f[p][y]*a[C+y][E];c<=E&&(f[p][d]=-f[h][d-1]/a[E+1][c],m+=f[p][d]*a[c][E]),o[d][c]=m;const b=h;h=p,p=b}}let u=n;for(let c=1;c<=t;++c){for(let h=0;h<=n;++h)o[c][h]*=u;u*=n-c}return o}function Rr(A,e,n,t,s){const r=s<A?s:A,o=[],a=In(A,t,e),i=Gr(a,t,A,r,e),l=[];for(let u=0;u<n.length;++u){const c=n[u].clone(),h=c.w;c.x*=h,c.y*=h,c.z*=h,l[u]=c}for(let u=0;u<=r;++u){const c=l[a-A].clone().multiplyScalar(i[u][0]);for(let h=1;h<=A;++h)c.add(l[a-A+h].clone().multiplyScalar(i[u][h]));o[u]=c}for(let u=r+1;u<=s+1;++u)o[u]=new nt(0,0,0);return o}function br(A,e){let n=1;for(let s=2;s<=A;++s)n*=s;let t=1;for(let s=2;s<=e;++s)t*=s;for(let s=2;s<=A-e;++s)t*=s;return n/t}function vr(A){const e=A.length,n=[],t=[];for(let r=0;r<e;++r){const o=A[r];n[r]=new P(o.x,o.y,o.z),t[r]=o.w}const s=[];for(let r=0;r<e;++r){const o=n[r].clone();for(let a=1;a<=r;++a)o.sub(s[r-a].clone().multiplyScalar(br(r,a)*t[a]));s[r]=o.divideScalar(t[0])}return s}function Lr(A,e,n,t,s){const r=Rr(A,e,n,t,s);return vr(r)}class Yt extends ps{constructor(e,n,t,s,r){super(),this.degree=e,this.knots=n,this.controlPoints=[],this.startKnot=s||0,this.endKnot=r||this.knots.length-1;for(let o=0;o<t.length;++o){const a=t[o];this.controlPoints[o]=new nt(a.x,a.y,a.z,a.w)}}getPoint(e,n){const t=n||new P,s=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),r=yr(this.degree,this.knots,this.controlPoints,s);return r.w!=1&&r.divideScalar(r.w),t.set(r.x,r.y,r.z)}getTangent(e,n){const t=n||new P,s=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),r=Lr(this.degree,this.knots,this.controlPoints,s,1);return t.copy(r[1]).normalize(),t}}let G,S,k;class Vr extends yt{constructor(e){super(e)}load(e,n,t,s){const r=this,o=r.path===""?Fe.extractUrlBase(e):r.path,a=new Ke(this.manager);a.setPath(r.path),a.setResponseType("arraybuffer"),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,function(i){try{n(r.parse(i,o))}catch(l){s?s(l):console.error(l),r.manager.itemError(e)}},t,s)}parse(e,n){if(Sr(e))G=new xr().parse(e);else{const s=Gn(e);if(!Jr(s))throw new Error("THREE.FBXLoader: Unknown format.");if(Vt(s)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+Vt(s));G=new Or().parse(s)}const t=new en(this.manager).setPath(this.resourcePath||n).setCrossOrigin(this.crossOrigin);return new Hr(t,this.manager).parse(G)}}class Hr{constructor(e,n){this.textureLoader=e,this.manager=n}parse(){S=this.parseConnections();const e=this.parseImages(),n=this.parseTextures(e),t=this.parseMaterials(n),s=this.parseDeformers(),r=new wr().parse(s);return this.parseScene(s,r,t),k}parseConnections(){const e=new Map;return"Connections"in G&&G.Connections.connections.forEach(function(t){const s=t[0],r=t[1],o=t[2];e.has(s)||e.set(s,{parents:[],children:[]});const a={ID:r,relationship:o};e.get(s).parents.push(a),e.has(r)||e.set(r,{parents:[],children:[]});const i={ID:s,relationship:o};e.get(r).children.push(i)}),e}parseImages(){const e={},n={};if("Video"in G.Objects){const t=G.Objects.Video;for(const s in t){const r=t[s],o=parseInt(s);if(e[o]=r.RelativeFilename||r.Filename,"Content"in r){const a=r.Content instanceof ArrayBuffer&&r.Content.byteLength>0,i=typeof r.Content=="string"&&r.Content!=="";if(a||i){const l=this.parseImage(t[s]);n[r.RelativeFilename||r.Filename]=l}}}}for(const t in e){const s=e[t];n[s]!==void 0?e[t]=n[s]:e[t]=e[t].split("\\").pop()}return e}parseImage(e){const n=e.Content,t=e.RelativeFilename||e.Filename,s=t.slice(t.lastIndexOf(".")+1).toLowerCase();let r;switch(s){case"bmp":r="image/bmp";break;case"jpg":case"jpeg":r="image/jpeg";break;case"png":r="image/png";break;case"tif":r="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",t),r="image/tga";break;default:console.warn('FBXLoader: Image type "'+s+'" is not supported.');return}if(typeof n=="string")return"data:"+r+";base64,"+n;{const o=new Uint8Array(n);return window.URL.createObjectURL(new Blob([o],{type:r}))}}parseTextures(e){const n=new Map;if("Texture"in G.Objects){const t=G.Objects.Texture;for(const s in t){const r=this.parseTexture(t[s],e);n.set(parseInt(s),r)}}return n}parseTexture(e,n){const t=this.loadTexture(e,n);t.ID=e.id,t.name=e.attrName;const s=e.WrapModeU,r=e.WrapModeV,o=s!==void 0?s.value:0,a=r!==void 0?r.value:0;if(t.wrapS=o===0?ke:gt,t.wrapT=a===0?ke:gt,"Scaling"in e){const i=e.Scaling.value;t.repeat.x=i[0],t.repeat.y=i[1]}return t}loadTexture(e,n){let t;const s=this.textureLoader.path,r=S.get(e.id).children;r!==void 0&&r.length>0&&n[r[0].ID]!==void 0&&(t=n[r[0].ID],(t.indexOf("blob:")===0||t.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let o;const a=e.FileName.slice(-3).toLowerCase();if(a==="tga"){const i=this.manager.getHandler(".tga");i===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),o=new et):(i.setPath(this.textureLoader.path),o=i.load(t))}else a==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),o=new et):o=this.textureLoader.load(t);return this.textureLoader.setPath(s),o}parseMaterials(e){const n=new Map;if("Material"in G.Objects){const t=G.Objects.Material;for(const s in t){const r=this.parseMaterial(t[s],e);r!==null&&n.set(parseInt(s),r)}}return n}parseMaterial(e,n){const t=e.id,s=e.attrName;let r=e.ShadingModel;if(typeof r=="object"&&(r=r.value),!S.has(t))return null;const o=this.parseParameters(e,n,t);let a;switch(r.toLowerCase()){case"phong":a=new at;break;case"lambert":a=new Bs;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',r),a=new at;break}return a.setValues(o),a.name=s,a}parseParameters(e,n,t){const s={};e.BumpFactor&&(s.bumpScale=e.BumpFactor.value),e.Diffuse?s.color=new U().fromArray(e.Diffuse.value):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(s.color=new U().fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(s.displacementScale=e.DisplacementFactor.value),e.Emissive?s.emissive=new U().fromArray(e.Emissive.value):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(s.emissive=new U().fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(s.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(s.opacity=parseFloat(e.Opacity.value)),s.opacity<1&&(s.transparent=!0),e.ReflectionFactor&&(s.reflectivity=e.ReflectionFactor.value),e.Shininess&&(s.shininess=e.Shininess.value),e.Specular?s.specular=new U().fromArray(e.Specular.value):e.SpecularColor&&e.SpecularColor.type==="Color"&&(s.specular=new U().fromArray(e.SpecularColor.value));const r=this;return S.get(t).children.forEach(function(o){const a=o.relationship;switch(a){case"Bump":s.bumpMap=r.getTexture(n,o.ID);break;case"Maya|TEX_ao_map":s.aoMap=r.getTexture(n,o.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":s.map=r.getTexture(n,o.ID),s.map!==void 0&&("colorSpace"in s.map?s.map.colorSpace="srgb":s.map.encoding=3001);break;case"DisplacementColor":s.displacementMap=r.getTexture(n,o.ID);break;case"EmissiveColor":s.emissiveMap=r.getTexture(n,o.ID),s.emissiveMap!==void 0&&("colorSpace"in s.emissiveMap?s.emissiveMap.colorSpace="srgb":s.emissiveMap.encoding=3001);break;case"NormalMap":case"Maya|TEX_normal_map":s.normalMap=r.getTexture(n,o.ID);break;case"ReflectionColor":s.envMap=r.getTexture(n,o.ID),s.envMap!==void 0&&(s.envMap.mapping=fs,"colorSpace"in s.envMap?s.envMap.colorSpace="srgb":s.envMap.encoding=3001);break;case"SpecularColor":s.specularMap=r.getTexture(n,o.ID),s.specularMap!==void 0&&("colorSpace"in s.specularMap?s.specularMap.colorSpace="srgb":s.specularMap.encoding=3001);break;case"TransparentColor":case"TransparencyFactor":s.alphaMap=r.getTexture(n,o.ID),s.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",a);break}}),s}getTexture(e,n){return"LayeredTexture"in G.Objects&&n in G.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),n=S.get(n).children[0].ID),e.get(n)}parseDeformers(){const e={},n={};if("Deformer"in G.Objects){const t=G.Objects.Deformer;for(const s in t){const r=t[s],o=S.get(parseInt(s));if(r.attrType==="Skin"){const a=this.parseSkeleton(o,t);a.ID=s,o.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),a.geometryID=o.parents[0].ID,e[s]=a}else if(r.attrType==="BlendShape"){const a={id:s};a.rawTargets=this.parseMorphTargets(o,t),a.id=s,o.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),n[s]=a}}}return{skeletons:e,morphTargets:n}}parseSkeleton(e,n){const t=[];return e.children.forEach(function(s){const r=n[s.ID];if(r.attrType!=="Cluster")return;const o={ID:s.ID,indices:[],weights:[],transformLink:new H().fromArray(r.TransformLink.a)};"Indexes"in r&&(o.indices=r.Indexes.a,o.weights=r.Weights.a),t.push(o)}),{rawBones:t,bones:[]}}parseMorphTargets(e,n){const t=[];for(let s=0;s<e.children.length;s++){const r=e.children[s],o=n[r.ID],a={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if(o.attrType!=="BlendShapeChannel")return;a.geoID=S.get(parseInt(r.ID)).children.filter(function(i){return i.relationship===void 0})[0].ID,t.push(a)}return t}parseScene(e,n,t){k=new Je;const s=this.parseModels(e.skeletons,n,t),r=G.Objects.Model,o=this;s.forEach(function(i){const l=r[i.ID];o.setLookAtProperties(i,l),S.get(i.ID).parents.forEach(function(c){const h=s.get(c.ID);h!==void 0&&h.add(i)}),i.parent===null&&k.add(i)}),this.bindSkeleton(e.skeletons,n,s),this.createAmbientLight(),k.traverse(function(i){if(i.userData.transformData){i.parent&&(i.userData.transformData.parentMatrix=i.parent.matrix,i.userData.transformData.parentMatrixWorld=i.parent.matrixWorld);const l=Dn(i.userData.transformData);i.applyMatrix4(l),i.updateWorldMatrix()}});const a=new Pr().parse();k.children.length===1&&k.children[0].isGroup&&(k.children[0].animations=a,k=k.children[0]),k.animations=a}parseModels(e,n,t){const s=new Map,r=G.Objects.Model;for(const o in r){const a=parseInt(o),i=r[o],l=S.get(a);let u=this.buildSkeleton(l,e,a,i.attrName);if(!u){switch(i.attrType){case"Camera":u=this.createCamera(l);break;case"Light":u=this.createLight(l);break;case"Mesh":u=this.createMesh(l,n,t);break;case"NurbsCurve":u=this.createCurve(l,n);break;case"LimbNode":case"Root":u=new Ct;break;case"Null":default:u=new Je;break}u.name=i.attrName?Ne.sanitizeNodeName(i.attrName):"",u.ID=a}this.getTransformData(u,i),s.set(a,u)}return s}buildSkeleton(e,n,t,s){let r=null;return e.parents.forEach(function(o){for(const a in n){const i=n[a];i.rawBones.forEach(function(l,u){if(l.ID===o.ID){const c=r;r=new Ct,r.matrixWorld.copy(l.transformLink),r.name=s?Ne.sanitizeNodeName(s):"",r.ID=t,i.bones[u]=r,c!==null&&r.add(c)}})}}),r}createCamera(e){let n,t;if(e.children.forEach(function(s){const r=G.Objects.NodeAttribute[s.ID];r!==void 0&&(t=r)}),t===void 0)n=new xe;else{let s=0;t.CameraProjectionType!==void 0&&t.CameraProjectionType.value===1&&(s=1);let r=1;t.NearPlane!==void 0&&(r=t.NearPlane.value/1e3);let o=1e3;t.FarPlane!==void 0&&(o=t.FarPlane.value/1e3);let a=window.innerWidth,i=window.innerHeight;t.AspectWidth!==void 0&&t.AspectHeight!==void 0&&(a=t.AspectWidth.value,i=t.AspectHeight.value);const l=a/i;let u=45;t.FieldOfView!==void 0&&(u=t.FieldOfView.value);const c=t.FocalLength?t.FocalLength.value:null;switch(s){case 0:n=new Pe(u,l,r,o),c!==null&&n.setFocalLength(c);break;case 1:n=new Oe(-a/2,a/2,i/2,-i/2,r,o);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+s+"."),n=new xe;break}}return n}createLight(e){let n,t;if(e.children.forEach(function(s){const r=G.Objects.NodeAttribute[s.ID];r!==void 0&&(t=r)}),t===void 0)n=new xe;else{let s;t.LightType===void 0?s=0:s=t.LightType.value;let r=16777215;t.Color!==void 0&&(r=new U().fromArray(t.Color.value));let o=t.Intensity===void 0?1:t.Intensity.value/100;t.CastLightOnObject!==void 0&&t.CastLightOnObject.value===0&&(o=0);let a=0;t.FarAttenuationEnd!==void 0&&(t.EnableFarAttenuation!==void 0&&t.EnableFarAttenuation.value===0?a=0:a=t.FarAttenuationEnd.value);const i=1;switch(s){case 0:n=new mt(r,o,a,i);break;case 1:n=new $t(r,o);break;case 2:let l=Math.PI/3;t.InnerAngle!==void 0&&(l=Z.degToRad(t.InnerAngle.value));let u=0;t.OuterAngle!==void 0&&(u=Z.degToRad(t.OuterAngle.value),u=Math.max(u,1)),n=new qt(r,o,a,l,u,i);break;default:console.warn("THREE.FBXLoader: Unknown light type "+t.LightType.value+", defaulting to a PointLight."),n=new mt(r,o);break}t.CastShadows!==void 0&&t.CastShadows.value===1&&(n.castShadow=!0)}return n}createMesh(e,n,t){let s,r=null,o=null;const a=[];return e.children.forEach(function(i){n.has(i.ID)&&(r=n.get(i.ID)),t.has(i.ID)&&a.push(t.get(i.ID))}),a.length>1?o=a:a.length>0?o=a[0]:(o=new at({color:13421772}),a.push(o)),"color"in r.attributes&&a.forEach(function(i){i.vertexColors=!0}),r.FBX_Deformer?(s=new on(r,o),s.normalizeSkinWeights()):s=new an(r,o),s}createCurve(e,n){const t=e.children.reduce(function(r,o){return n.has(o.ID)&&(r=n.get(o.ID)),r},null),s=new sn({color:3342591,linewidth:1});return new cn(t,s)}getTransformData(e,n){const t={};"InheritType"in n&&(t.inheritType=parseInt(n.InheritType.value)),"RotationOrder"in n?t.eulerOrder=yn(n.RotationOrder.value):t.eulerOrder="ZYX","Lcl_Translation"in n&&(t.translation=n.Lcl_Translation.value),"PreRotation"in n&&(t.preRotation=n.PreRotation.value),"Lcl_Rotation"in n&&(t.rotation=n.Lcl_Rotation.value),"PostRotation"in n&&(t.postRotation=n.PostRotation.value),"Lcl_Scaling"in n&&(t.scale=n.Lcl_Scaling.value),"ScalingOffset"in n&&(t.scalingOffset=n.ScalingOffset.value),"ScalingPivot"in n&&(t.scalingPivot=n.ScalingPivot.value),"RotationOffset"in n&&(t.rotationOffset=n.RotationOffset.value),"RotationPivot"in n&&(t.rotationPivot=n.RotationPivot.value),e.userData.transformData=t}setLookAtProperties(e,n){"LookAtProperty"in n&&S.get(e.ID).children.forEach(function(s){if(s.relationship==="LookAtProperty"){const r=G.Objects.Model[s.ID];if("Lcl_Translation"in r){const o=r.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(o),k.add(e.target)):e.lookAt(new P().fromArray(o))}}})}bindSkeleton(e,n,t){const s=this.parsePoseNodes();for(const r in e){const o=e[r];S.get(parseInt(o.ID)).parents.forEach(function(i){if(n.has(i.ID)){const l=i.ID;S.get(l).parents.forEach(function(c){t.has(c.ID)&&t.get(c.ID).bind(new ln(o.bones),s[c.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in G.Objects){const n=G.Objects.Pose;for(const t in n)if(n[t].attrType==="BindPose"&&n[t].NbPoseNodes>0){const s=n[t].PoseNode;Array.isArray(s)?s.forEach(function(r){e[r.Node]=new H().fromArray(r.Matrix.a)}):e[s.Node]=new H().fromArray(s.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in G&&"AmbientColor"in G.GlobalSettings){const e=G.GlobalSettings.AmbientColor.value,n=e[0],t=e[1],s=e[2];if(n!==0||t!==0||s!==0){const r=new U(n,t,s);k.add(new ds(r,1))}}}}class wr{parse(e){const n=new Map;if("Geometry"in G.Objects){const t=G.Objects.Geometry;for(const s in t){const r=S.get(parseInt(s)),o=this.parseGeometry(r,t[s],e);n.set(parseInt(s),o)}}return n}parseGeometry(e,n,t){switch(n.attrType){case"Mesh":return this.parseMeshGeometry(e,n,t);case"NurbsCurve":return this.parseNurbsGeometry(n)}}parseMeshGeometry(e,n,t){const s=t.skeletons,r=[],o=e.parents.map(function(c){return G.Objects.Model[c.ID]});if(o.length===0)return;const a=e.children.reduce(function(c,h){return s[h.ID]!==void 0&&(c=s[h.ID]),c},null);e.children.forEach(function(c){t.morphTargets[c.ID]!==void 0&&r.push(t.morphTargets[c.ID])});const i=o[0],l={};"RotationOrder"in i&&(l.eulerOrder=yn(i.RotationOrder.value)),"InheritType"in i&&(l.inheritType=parseInt(i.InheritType.value)),"GeometricTranslation"in i&&(l.translation=i.GeometricTranslation.value),"GeometricRotation"in i&&(l.rotation=i.GeometricRotation.value),"GeometricScaling"in i&&(l.scale=i.GeometricScaling.value);const u=Dn(l);return this.genGeometry(n,a,r,u)}genGeometry(e,n,t,s){const r=new Me;e.attrName&&(r.name=e.attrName);const o=this.parseGeoNode(e,n),a=this.genBuffers(o),i=new ge(a.vertex,3);if(i.applyMatrix4(s),r.setAttribute("position",i),a.colors.length>0&&r.setAttribute("color",new ge(a.colors,3)),n&&(r.setAttribute("skinIndex",new ms(a.weightsIndices,4)),r.setAttribute("skinWeight",new ge(a.vertexWeights,4)),r.FBX_Deformer=n),a.normal.length>0){const l=new Cs().getNormalMatrix(s),u=new ge(a.normal,3);u.applyNormalMatrix(l),r.setAttribute("normal",u)}if(a.uvs.forEach(function(l,u){gs==="uv2"&&u++;const c=u===0?"uv":`uv${u}`;r.setAttribute(c,new ge(a.uvs[u],2))}),o.material&&o.material.mappingType!=="AllSame"){let l=a.materialIndex[0],u=0;if(a.materialIndex.forEach(function(c,h){c!==l&&(r.addGroup(u,h-u,l),l=c,u=h)}),r.groups.length>0){const c=r.groups[r.groups.length-1],h=c.start+c.count;h!==a.materialIndex.length&&r.addGroup(h,a.materialIndex.length-h,l)}r.groups.length===0&&r.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(r,e,t,s),r}parseGeoNode(e,n){const t={};if(t.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],t.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(t.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(t.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(t.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){t.uv=[];let s=0;for(;e.LayerElementUV[s];)e.LayerElementUV[s].UV&&t.uv.push(this.parseUVs(e.LayerElementUV[s])),s++}return t.weightTable={},n!==null&&(t.skeleton=n,n.rawBones.forEach(function(s,r){s.indices.forEach(function(o,a){t.weightTable[o]===void 0&&(t.weightTable[o]=[]),t.weightTable[o].push({id:r,weight:s.weights[a]})})})),t}genBuffers(e){const n={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let t=0,s=0,r=!1,o=[],a=[],i=[],l=[],u=[],c=[];const h=this;return e.vertexIndices.forEach(function(p,f){let d,m=!1;p<0&&(p=p^-1,m=!0);let C=[],E=[];if(o.push(p*3,p*3+1,p*3+2),e.color){const M=We(f,t,p,e.color);i.push(M[0],M[1],M[2])}if(e.skeleton){if(e.weightTable[p]!==void 0&&e.weightTable[p].forEach(function(M){E.push(M.weight),C.push(M.id)}),E.length>4){r||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),r=!0);const M=[0,0,0,0],F=[0,0,0,0];E.forEach(function(b,y){let w=b,v=C[y];F.forEach(function(x,T,V){if(w>x){V[T]=w,w=x;const se=M[T];M[T]=v,v=se}})}),C=M,E=F}for(;E.length<4;)E.push(0),C.push(0);for(let M=0;M<4;++M)u.push(E[M]),c.push(C[M])}if(e.normal){const M=We(f,t,p,e.normal);a.push(M[0],M[1],M[2])}e.material&&e.material.mappingType!=="AllSame"&&(d=We(f,t,p,e.material)[0]),e.uv&&e.uv.forEach(function(M,F){const b=We(f,t,p,M);l[F]===void 0&&(l[F]=[]),l[F].push(b[0]),l[F].push(b[1])}),s++,m&&(h.genFace(n,e,o,d,a,i,l,u,c,s),t++,s=0,o=[],a=[],i=[],l=[],u=[],c=[])}),n}genFace(e,n,t,s,r,o,a,i,l,u){for(let c=2;c<u;c++)e.vertex.push(n.vertexPositions[t[0]]),e.vertex.push(n.vertexPositions[t[1]]),e.vertex.push(n.vertexPositions[t[2]]),e.vertex.push(n.vertexPositions[t[(c-1)*3]]),e.vertex.push(n.vertexPositions[t[(c-1)*3+1]]),e.vertex.push(n.vertexPositions[t[(c-1)*3+2]]),e.vertex.push(n.vertexPositions[t[c*3]]),e.vertex.push(n.vertexPositions[t[c*3+1]]),e.vertex.push(n.vertexPositions[t[c*3+2]]),n.skeleton&&(e.vertexWeights.push(i[0]),e.vertexWeights.push(i[1]),e.vertexWeights.push(i[2]),e.vertexWeights.push(i[3]),e.vertexWeights.push(i[(c-1)*4]),e.vertexWeights.push(i[(c-1)*4+1]),e.vertexWeights.push(i[(c-1)*4+2]),e.vertexWeights.push(i[(c-1)*4+3]),e.vertexWeights.push(i[c*4]),e.vertexWeights.push(i[c*4+1]),e.vertexWeights.push(i[c*4+2]),e.vertexWeights.push(i[c*4+3]),e.weightsIndices.push(l[0]),e.weightsIndices.push(l[1]),e.weightsIndices.push(l[2]),e.weightsIndices.push(l[3]),e.weightsIndices.push(l[(c-1)*4]),e.weightsIndices.push(l[(c-1)*4+1]),e.weightsIndices.push(l[(c-1)*4+2]),e.weightsIndices.push(l[(c-1)*4+3]),e.weightsIndices.push(l[c*4]),e.weightsIndices.push(l[c*4+1]),e.weightsIndices.push(l[c*4+2]),e.weightsIndices.push(l[c*4+3])),n.color&&(e.colors.push(o[0]),e.colors.push(o[1]),e.colors.push(o[2]),e.colors.push(o[(c-1)*3]),e.colors.push(o[(c-1)*3+1]),e.colors.push(o[(c-1)*3+2]),e.colors.push(o[c*3]),e.colors.push(o[c*3+1]),e.colors.push(o[c*3+2])),n.material&&n.material.mappingType!=="AllSame"&&(e.materialIndex.push(s),e.materialIndex.push(s),e.materialIndex.push(s)),n.normal&&(e.normal.push(r[0]),e.normal.push(r[1]),e.normal.push(r[2]),e.normal.push(r[(c-1)*3]),e.normal.push(r[(c-1)*3+1]),e.normal.push(r[(c-1)*3+2]),e.normal.push(r[c*3]),e.normal.push(r[c*3+1]),e.normal.push(r[c*3+2])),n.uv&&n.uv.forEach(function(h,p){e.uvs[p]===void 0&&(e.uvs[p]=[]),e.uvs[p].push(a[p][0]),e.uvs[p].push(a[p][1]),e.uvs[p].push(a[p][(c-1)*2]),e.uvs[p].push(a[p][(c-1)*2+1]),e.uvs[p].push(a[p][c*2]),e.uvs[p].push(a[p][c*2+1])})}addMorphTargets(e,n,t,s){if(t.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const r=this;t.forEach(function(o){o.rawTargets.forEach(function(a){const i=G.Objects.Geometry[a.geoID];i!==void 0&&r.genMorphGeometry(e,n,i,s,a.name)})})}genMorphGeometry(e,n,t,s,r){const o=n.PolygonVertexIndex!==void 0?n.PolygonVertexIndex.a:[],a=t.Vertices!==void 0?t.Vertices.a:[],i=t.Indexes!==void 0?t.Indexes.a:[],l=e.attributes.position.count*3,u=new Float32Array(l);for(let f=0;f<i.length;f++){const d=i[f]*3;u[d]=a[f*3],u[d+1]=a[f*3+1],u[d+2]=a[f*3+2]}const c={vertexIndices:o,vertexPositions:u},h=this.genBuffers(c),p=new ge(h.vertex,3);p.name=r||t.attrName,p.applyMatrix4(s),e.morphAttributes.position.push(p)}parseNormals(e){const n=e.MappingInformationType,t=e.ReferenceInformationType,s=e.Normals.a;let r=[];return t==="IndexToDirect"&&("NormalIndex"in e?r=e.NormalIndex.a:"NormalsIndex"in e&&(r=e.NormalsIndex.a)),{dataSize:3,buffer:s,indices:r,mappingType:n,referenceType:t}}parseUVs(e){const n=e.MappingInformationType,t=e.ReferenceInformationType,s=e.UV.a;let r=[];return t==="IndexToDirect"&&(r=e.UVIndex.a),{dataSize:2,buffer:s,indices:r,mappingType:n,referenceType:t}}parseVertexColors(e){const n=e.MappingInformationType,t=e.ReferenceInformationType,s=e.Colors.a;let r=[];return t==="IndexToDirect"&&(r=e.ColorIndex.a),{dataSize:4,buffer:s,indices:r,mappingType:n,referenceType:t}}parseMaterialIndices(e){const n=e.MappingInformationType,t=e.ReferenceInformationType;if(n==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:t};const s=e.Materials.a,r=[];for(let o=0;o<s.length;++o)r.push(o);return{dataSize:1,buffer:s,indices:r,mappingType:n,referenceType:t}}parseNurbsGeometry(e){if(Yt===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new Me;const n=parseInt(e.Order);if(isNaN(n))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new Me;const t=n-1,s=e.KnotVector.a,r=[],o=e.Points.a;for(let c=0,h=o.length;c<h;c+=4)r.push(new nt().fromArray(o,c));let a,i;if(e.Form==="Closed")r.push(r[0]);else if(e.Form==="Periodic"){a=t,i=s.length-1-a;for(let c=0;c<t;++c)r.push(r[c])}const u=new Yt(t,s,r,a,i).getPoints(r.length*12);return new Me().setFromPoints(u)}}class Pr{parse(){const e=[],n=this.parseClips();if(n!==void 0)for(const t in n){const s=n[t],r=this.addClip(s);e.push(r)}return e}parseClips(){if(G.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const n=this.parseAnimationLayers(e);return this.parseAnimStacks(n)}parseAnimationCurveNodes(){const e=G.Objects.AnimationCurveNode,n=new Map;for(const t in e){const s=e[t];if(s.attrName.match(/S|R|T|DeformPercent/)!==null){const r={id:s.id,attr:s.attrName,curves:{}};n.set(r.id,r)}}return n}parseAnimationCurves(e){const n=G.Objects.AnimationCurve;for(const t in n){const s={id:n[t].id,times:n[t].KeyTime.a.map(Ur),values:n[t].KeyValueFloat.a},r=S.get(s.id);if(r!==void 0){const o=r.parents[0].ID,a=r.parents[0].relationship;a.match(/X/)?e.get(o).curves.x=s:a.match(/Y/)?e.get(o).curves.y=s:a.match(/Z/)?e.get(o).curves.z=s:a.match(/d|DeformPercent/)&&e.has(o)&&(e.get(o).curves.morph=s)}}}parseAnimationLayers(e){const n=G.Objects.AnimationLayer,t=new Map;for(const s in n){const r=[],o=S.get(parseInt(s));o!==void 0&&(o.children.forEach(function(i,l){if(e.has(i.ID)){const u=e.get(i.ID);if(u.curves.x!==void 0||u.curves.y!==void 0||u.curves.z!==void 0){if(r[l]===void 0){const c=S.get(i.ID).parents.filter(function(h){return h.relationship!==void 0})[0].ID;if(c!==void 0){const h=G.Objects.Model[c.toString()];if(h===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",i);return}const p={modelName:h.attrName?Ne.sanitizeNodeName(h.attrName):"",ID:h.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};k.traverse(function(f){f.ID===h.id&&(p.transform=f.matrix,f.userData.transformData&&(p.eulerOrder=f.userData.transformData.eulerOrder))}),p.transform||(p.transform=new H),"PreRotation"in h&&(p.preRotation=h.PreRotation.value),"PostRotation"in h&&(p.postRotation=h.PostRotation.value),r[l]=p}}r[l]&&(r[l][u.attr]=u)}else if(u.curves.morph!==void 0){if(r[l]===void 0){const c=S.get(i.ID).parents.filter(function(C){return C.relationship!==void 0})[0].ID,h=S.get(c).parents[0].ID,p=S.get(h).parents[0].ID,f=S.get(p).parents[0].ID,d=G.Objects.Model[f],m={modelName:d.attrName?Ne.sanitizeNodeName(d.attrName):"",morphName:G.Objects.Deformer[c].attrName};r[l]=m}r[l][u.attr]=u}}}),t.set(parseInt(s),r))}return t}parseAnimStacks(e){const n=G.Objects.AnimationStack,t={};for(const s in n){const r=S.get(parseInt(s)).children;r.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const o=e.get(r[0].ID);t[s]={name:n[s].attrName,layer:o}}return t}addClip(e){let n=[];const t=this;return e.layer.forEach(function(s){n=n.concat(t.generateTracks(s))}),new Dt(e.name,-1,n)}generateTracks(e){const n=[];let t=new P,s=new te,r=new P;if(e.transform&&e.transform.decompose(t,s,r),t=t.toArray(),s=new we().setFromQuaternion(s,e.eulerOrder).toArray(),r=r.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.T.curves,t,"position");o!==void 0&&n.push(o)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const o=this.generateRotationTrack(e.modelName,e.R.curves,s,e.preRotation,e.postRotation,e.eulerOrder);o!==void 0&&n.push(o)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.S.curves,r,"scale");o!==void 0&&n.push(o)}if(e.DeformPercent!==void 0){const o=this.generateMorphTrack(e);o!==void 0&&n.push(o)}return n}generateVectorTrack(e,n,t,s){const r=this.getTimesForAllAxes(n),o=this.getKeyframeTrackValues(r,n,t);return new qe(e+"."+s,r,o)}generateRotationTrack(e,n,t,s,r,o){n.x!==void 0&&(this.interpolateRotations(n.x),n.x.values=n.x.values.map(Z.degToRad)),n.y!==void 0&&(this.interpolateRotations(n.y),n.y.values=n.y.values.map(Z.degToRad)),n.z!==void 0&&(this.interpolateRotations(n.z),n.z.values=n.z.values.map(Z.degToRad));const a=this.getTimesForAllAxes(n),i=this.getKeyframeTrackValues(a,n,t);s!==void 0&&(s=s.map(Z.degToRad),s.push(o),s=new we().fromArray(s),s=new te().setFromEuler(s)),r!==void 0&&(r=r.map(Z.degToRad),r.push(o),r=new we().fromArray(r),r=new te().setFromEuler(r).invert());const l=new te,u=new we,c=[];for(let h=0;h<i.length;h+=3)u.set(i[h],i[h+1],i[h+2],o),l.setFromEuler(u),s!==void 0&&l.premultiply(s),r!==void 0&&l.multiply(r),l.toArray(c,h/3*4);return new $e(e+".quaternion",a,c)}generateMorphTrack(e){const n=e.DeformPercent.curves.morph,t=n.values.map(function(r){return r/100}),s=k.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new Et(e.modelName+".morphTargetInfluences["+s+"]",n.times,t)}getTimesForAllAxes(e){let n=[];if(e.x!==void 0&&(n=n.concat(e.x.times)),e.y!==void 0&&(n=n.concat(e.y.times)),e.z!==void 0&&(n=n.concat(e.z.times)),n=n.sort(function(t,s){return t-s}),n.length>1){let t=1,s=n[0];for(let r=1;r<n.length;r++){const o=n[r];o!==s&&(n[t]=o,s=o,t++)}n=n.slice(0,t)}return n}getKeyframeTrackValues(e,n,t){const s=t,r=[];let o=-1,a=-1,i=-1;return e.forEach(function(l){if(n.x&&(o=n.x.times.indexOf(l)),n.y&&(a=n.y.times.indexOf(l)),n.z&&(i=n.z.times.indexOf(l)),o!==-1){const u=n.x.values[o];r.push(u),s[0]=u}else r.push(s[0]);if(a!==-1){const u=n.y.values[a];r.push(u),s[1]=u}else r.push(s[1]);if(i!==-1){const u=n.z.values[i];r.push(u),s[2]=u}else r.push(s[2])}),r}interpolateRotations(e){for(let n=1;n<e.values.length;n++){const t=e.values[n-1],s=e.values[n]-t,r=Math.abs(s);if(r>=180){const o=r/180,a=s/o;let i=t+a;const l=e.times[n-1],c=(e.times[n]-l)/o;let h=l+c;const p=[],f=[];for(;h<e.times[n];)p.push(h),h+=c,f.push(i),i+=a;e.times=Wt(e.times,n,p),e.values=Wt(e.values,n,f)}}}}class Or{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,n){this.currentProp=e,this.currentPropName=n}parse(e){this.currentIndent=0,this.allNodes=new Tn,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const n=this,t=e.split(/[\r\n]+/);return t.forEach(function(s,r){const o=s.match(/^[\s\t]*;/),a=s.match(/^[\s\t]*$/);if(o||a)return;const i=s.match("^\\t{"+n.currentIndent+"}(\\w+):(.*){",""),l=s.match("^\\t{"+n.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),u=s.match("^\\t{"+(n.currentIndent-1)+"}}");i?n.parseNodeBegin(s,i):l?n.parseNodeProperty(s,l,t[++r]):u?n.popStack():s.match(/^[^\s\t}]/)&&n.parseNodePropertyContinued(s)}),this.allNodes}parseNodeBegin(e,n){const t=n[1].trim().replace(/^"/,"").replace(/"$/,""),s=n[2].split(",").map(function(i){return i.trim().replace(/^"/,"").replace(/"$/,"")}),r={name:t},o=this.parseNodeAttr(s),a=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(t,r):t in a?(t==="PoseNode"?a.PoseNode.push(r):a[t].id!==void 0&&(a[t]={},a[t][a[t].id]=a[t]),o.id!==""&&(a[t][o.id]=r)):typeof o.id=="number"?(a[t]={},a[t][o.id]=r):t!=="Properties70"&&(t==="PoseNode"?a[t]=[r]:a[t]=r),typeof o.id=="number"&&(r.id=o.id),o.name!==""&&(r.attrName=o.name),o.type!==""&&(r.attrType=o.type),this.pushStack(r)}parseNodeAttr(e){let n=e[0];e[0]!==""&&(n=parseInt(e[0]),isNaN(n)&&(n=e[0]));let t="",s="";return e.length>1&&(t=e[1].replace(/^(\w+)::/,""),s=e[2]),{id:n,name:t,type:s}}parseNodeProperty(e,n,t){let s=n[1].replace(/^"/,"").replace(/"$/,"").trim(),r=n[2].replace(/^"/,"").replace(/"$/,"").trim();s==="Content"&&r===","&&(r=t.replace(/"/g,"").replace(/,$/,"").trim());const o=this.getCurrentNode();if(o.name==="Properties70"){this.parseNodeSpecialProperty(e,s,r);return}if(s==="C"){const i=r.split(",").slice(1),l=parseInt(i[0]),u=parseInt(i[1]);let c=r.split(",").slice(3);c=c.map(function(h){return h.trim().replace(/^"/,"")}),s="connections",r=[l,u],kr(r,c),o[s]===void 0&&(o[s]=[])}s==="Node"&&(o.id=r),s in o&&Array.isArray(o[s])?o[s].push(r):s!=="a"?o[s]=r:o.a=r,this.setCurrentProp(o,s),s==="a"&&r.slice(-1)!==","&&(o.a=Bt(r))}parseNodePropertyContinued(e){const n=this.getCurrentNode();n.a+=e,e.slice(-1)!==","&&(n.a=Bt(n.a))}parseNodeSpecialProperty(e,n,t){const s=t.split('",').map(function(u){return u.trim().replace(/^\"/,"").replace(/\s/,"_")}),r=s[0],o=s[1],a=s[2],i=s[3];let l=s[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":l=parseFloat(l);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":l=Bt(l);break}this.getPrevNode()[r]={type:o,type2:a,flag:i,value:l},this.setCurrentProp(this.getPrevNode(),r)}}class xr{parse(e){const n=new Zt(e);n.skip(23);const t=n.getUint32();if(t<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+t);const s=new Tn;for(;!this.endOfContent(n);){const r=this.parseNode(n,t);r!==null&&s.add(r.name,r)}return s}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,n){const t={},s=n>=7500?e.getUint64():e.getUint32(),r=n>=7500?e.getUint64():e.getUint32();n>=7500?e.getUint64():e.getUint32();const o=e.getUint8(),a=e.getString(o);if(s===0)return null;const i=[];for(let h=0;h<r;h++)i.push(this.parseProperty(e));const l=i.length>0?i[0]:"",u=i.length>1?i[1]:"",c=i.length>2?i[2]:"";for(t.singleProperty=r===1&&e.getOffset()===s;s>e.getOffset();){const h=this.parseNode(e,n);h!==null&&this.parseSubNode(a,t,h)}return t.propertyList=i,typeof l=="number"&&(t.id=l),u!==""&&(t.attrName=u),c!==""&&(t.attrType=c),a!==""&&(t.name=a),t}parseSubNode(e,n,t){if(t.singleProperty===!0){const s=t.propertyList[0];Array.isArray(s)?(n[t.name]=t,t.a=s):n[t.name]=s}else if(e==="Connections"&&t.name==="C"){const s=[];t.propertyList.forEach(function(r,o){o!==0&&s.push(r)}),n.connections===void 0&&(n.connections=[]),n.connections.push(s)}else if(t.name==="Properties70")Object.keys(t).forEach(function(r){n[r]=t[r]});else if(e==="Properties70"&&t.name==="P"){let s=t.propertyList[0],r=t.propertyList[1];const o=t.propertyList[2],a=t.propertyList[3];let i;s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),r.indexOf("Lcl ")===0&&(r=r.replace("Lcl ","Lcl_")),r==="Color"||r==="ColorRGB"||r==="Vector"||r==="Vector3D"||r.indexOf("Lcl_")===0?i=[t.propertyList[4],t.propertyList[5],t.propertyList[6]]:i=t.propertyList[4],n[s]={type:r,type2:o,flag:a,value:i}}else n[t.name]===void 0?typeof t.id=="number"?(n[t.name]={},n[t.name][t.id]=t):n[t.name]=t:t.name==="PoseNode"?(Array.isArray(n[t.name])||(n[t.name]=[n[t.name]]),n[t.name].push(t)):n[t.name][t.id]===void 0&&(n[t.name][t.id]=t)}parseProperty(e){const n=e.getString(1);let t;switch(n){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return t=e.getUint32(),e.getArrayBuffer(t);case"S":return t=e.getUint32(),e.getString(t);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const s=e.getUint32(),r=e.getUint32(),o=e.getUint32();if(r===0)switch(n){case"b":case"c":return e.getBooleanArray(s);case"d":return e.getFloat64Array(s);case"f":return e.getFloat32Array(s);case"i":return e.getInt32Array(s);case"l":return e.getInt64Array(s)}const a=Ls(new Uint8Array(e.getArrayBuffer(o))),i=new Zt(a.buffer);switch(n){case"b":case"c":return i.getBooleanArray(s);case"d":return i.getFloat64Array(s);case"f":return i.getFloat32Array(s);case"i":return i.getInt32Array(s);case"l":return i.getInt64Array(s)}default:throw new Error("THREE.FBXLoader: Unknown property type "+n)}}}class Zt{constructor(e,n){this.dv=new DataView(e),this.offset=0,this.littleEndian=n!==void 0?n:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const n=[];for(let t=0;t<e;t++)n.push(this.getBoolean());return n}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const n=[];for(let t=0;t<e;t++)n.push(this.getInt32());return n}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,n;return this.littleEndian?(e=this.getUint32(),n=this.getUint32()):(n=this.getUint32(),e=this.getUint32()),n&2147483648?(n=~n&4294967295,e=~e&4294967295,e===4294967295&&(n=n+1&4294967295),e=e+1&4294967295,-(n*4294967296+e)):n*4294967296+e}getInt64Array(e){const n=[];for(let t=0;t<e;t++)n.push(this.getInt64());return n}getUint64(){let e,n;return this.littleEndian?(e=this.getUint32(),n=this.getUint32()):(n=this.getUint32(),e=this.getUint32()),n*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const n=[];for(let t=0;t<e;t++)n.push(this.getFloat32());return n}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const n=[];for(let t=0;t<e;t++)n.push(this.getFloat64());return n}getArrayBuffer(e){const n=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,n}getString(e){let n=[];for(let s=0;s<e;s++)n[s]=this.getUint8();const t=n.indexOf(0);return t>=0&&(n=n.slice(0,t)),Te(new Uint8Array(n))}}class Tn{add(e,n){this[e]=n}}function Sr(A){const e="Kaydara FBX Binary  \0";return A.byteLength>=e.length&&e===Gn(A,0,e.length)}function Jr(A){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let n=0;function t(s){const r=A[s-1];return A=A.slice(n+s),n++,r}for(let s=0;s<e.length;++s)if(t(1)===e[s])return!1;return!0}function Vt(A){const e=/FBXVersion: (\d+)/,n=A.match(e);if(n)return parseInt(n[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function Ur(A){return A/46186158e3}const Kr=[];function We(A,e,n,t){let s;switch(t.mappingType){case"ByPolygonVertex":s=A;break;case"ByPolygon":s=e;break;case"ByVertice":s=n;break;case"AllSame":s=t.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+t.mappingType)}t.referenceType==="IndexToDirect"&&(s=t.indices[s]);const r=s*t.dataSize,o=r+t.dataSize;return Nr(Kr,t.buffer,r,o)}const pt=new we,Ee=new P;function Dn(A){const e=new H,n=new H,t=new H,s=new H,r=new H,o=new H,a=new H,i=new H,l=new H,u=new H,c=new H,h=new H,p=A.inheritType?A.inheritType:0;if(A.translation&&e.setPosition(Ee.fromArray(A.translation)),A.preRotation){const T=A.preRotation.map(Z.degToRad);T.push(A.eulerOrder),n.makeRotationFromEuler(pt.fromArray(T))}if(A.rotation){const T=A.rotation.map(Z.degToRad);T.push(A.eulerOrder),t.makeRotationFromEuler(pt.fromArray(T))}if(A.postRotation){const T=A.postRotation.map(Z.degToRad);T.push(A.eulerOrder),s.makeRotationFromEuler(pt.fromArray(T)),s.invert()}A.scale&&r.scale(Ee.fromArray(A.scale)),A.scalingOffset&&a.setPosition(Ee.fromArray(A.scalingOffset)),A.scalingPivot&&o.setPosition(Ee.fromArray(A.scalingPivot)),A.rotationOffset&&i.setPosition(Ee.fromArray(A.rotationOffset)),A.rotationPivot&&l.setPosition(Ee.fromArray(A.rotationPivot)),A.parentMatrixWorld&&(c.copy(A.parentMatrix),u.copy(A.parentMatrixWorld));const f=n.clone().multiply(t).multiply(s),d=new H;d.extractRotation(u);const m=new H;m.copyPosition(u);const C=m.clone().invert().multiply(u),E=d.clone().invert().multiply(C),M=r,F=new H;if(p===0)F.copy(d).multiply(f).multiply(E).multiply(M);else if(p===1)F.copy(d).multiply(E).multiply(f).multiply(M);else{const V=new H().scale(new P().setFromMatrixScale(c)).clone().invert(),se=E.clone().multiply(V);F.copy(d).multiply(f).multiply(se).multiply(M)}const b=l.clone().invert(),y=o.clone().invert();let w=e.clone().multiply(i).multiply(l).multiply(n).multiply(t).multiply(s).multiply(b).multiply(a).multiply(o).multiply(r).multiply(y);const v=new H().copyPosition(w),x=u.clone().multiply(v);return h.copyPosition(x),w=h.clone().multiply(F),w.premultiply(u.invert()),w}function yn(A){A=A||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return A===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[A]}function Bt(A){return A.split(",").map(function(n){return parseFloat(n)})}function Gn(A,e,n){return e===void 0&&(e=0),n===void 0&&(n=A.byteLength),Te(new Uint8Array(A,e,n))}function kr(A,e){for(let n=0,t=A.length,s=e.length;n<s;n++,t++)A[t]=e[n]}function Nr(A,e,n,t){for(let s=n,r=0;s<t;s++,r++)A[r]=e[s];return A}function Wt(A,e,n){return A.slice(0,e).concat(n).concat(A.slice(e))}const ft=new WeakMap;class Wr extends yt{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,n,t,s){const r=new Ke(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(n).catch(s)},t,s)}decodeDracoFile(e,n,t,s){const r={attributeIDs:t||this.defaultAttributeIDs,attributeTypes:s||this.defaultAttributeTypes,useUniqueIDs:!!t};this.decodeGeometry(e,r).then(n)}decodeGeometry(e,n){for(const i in n.attributeTypes){const l=n.attributeTypes[i];l.BYTES_PER_ELEMENT!==void 0&&(n.attributeTypes[i]=l.name)}const t=JSON.stringify(n);if(ft.has(e)){const i=ft.get(e);if(i.key===t)return i.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let s;const r=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(r,o).then(i=>(s=i,new Promise((l,u)=>{s._callbacks[r]={resolve:l,reject:u},s.postMessage({type:"decode",id:r,taskConfig:n,buffer:e},[e])}))).then(i=>this._createGeometry(i.geometry));return a.catch(()=>!0).then(()=>{s&&r&&this._releaseTask(s,r)}),ft.set(e,{key:t,promise:a}),a}_createGeometry(e){const n=new Me;e.index&&n.setIndex(new Se(e.index.array,1));for(let t=0;t<e.attributes.length;t++){const s=e.attributes[t],r=s.name,o=s.array,a=s.itemSize;n.setAttribute(r,new Se(o,a))}return n}_loadLibrary(e,n){const t=new Ke(this.manager);return t.setPath(this.decoderPath),t.setResponseType(n),t.setWithCredentials(this.withCredentials),new Promise((s,r)=>{t.load(e,s,void 0,r)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",n=[];return e?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then(t=>{const s=t[0];e||(this.decoderConfig.wasmBinary=t[1]);const r=_r.toString(),o=["/* draco decoder */",s,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,n){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const s=new Worker(this.workerSourceURL);s._callbacks={},s._taskCosts={},s._taskLoad=0,s.postMessage({type:"init",decoderConfig:this.decoderConfig}),s.onmessage=function(r){const o=r.data;switch(o.type){case"decode":s._callbacks[o.id].resolve(o);break;case"error":s._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(s)}else this.workerPool.sort(function(s,r){return s._taskLoad>r._taskLoad?-1:1});const t=this.workerPool[this.workerPool.length-1];return t._taskCosts[e]=n,t._taskLoad+=n,t})}_releaseTask(e,n){e._taskLoad-=e._taskCosts[n],delete e._callbacks[n],delete e._taskCosts[n]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function _r(){let A,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":A=a.decoderConfig,e=new Promise(function(u){A.onModuleLoaded=function(c){u({draco:c})},DracoDecoderModule(A)});break;case"decode":const i=a.buffer,l=a.taskConfig;e.then(u=>{const c=u.draco,h=new c.Decoder,p=new c.DecoderBuffer;p.Init(new Int8Array(i),i.byteLength);try{const f=n(c,h,p,l),d=f.attributes.map(m=>m.array.buffer);f.index&&d.push(f.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:f},d)}catch(f){console.error(f),self.postMessage({type:"error",id:a.id,error:f.message})}finally{c.destroy(p),c.destroy(h)}});break}};function n(o,a,i,l){const u=l.attributeIDs,c=l.attributeTypes;let h,p;const f=a.GetEncodedGeometryType(i);if(f===o.TRIANGULAR_MESH)h=new o.Mesh,p=a.DecodeBufferToMesh(i,h);else if(f===o.POINT_CLOUD)h=new o.PointCloud,p=a.DecodeBufferToPointCloud(i,h);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!p.ok()||h.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+p.error_msg());const d={index:null,attributes:[]};for(const m in u){const C=self[c[m]];let E,M;if(l.useUniqueIDs)M=u[m],E=a.GetAttributeByUniqueId(h,M);else{if(M=a.GetAttributeId(h,o[u[m]]),M===-1)continue;E=a.GetAttribute(h,M)}d.attributes.push(s(o,a,h,m,C,E))}return f===o.TRIANGULAR_MESH&&(d.index=t(o,a,h)),o.destroy(h),d}function t(o,a,i){const u=i.num_faces()*3,c=u*4,h=o._malloc(c);a.GetTrianglesUInt32Array(i,c,h);const p=new Uint32Array(o.HEAPF32.buffer,h,u).slice();return o._free(h),{array:p,itemSize:1}}function s(o,a,i,l,u,c){const h=c.num_components(),f=i.num_points()*h,d=f*u.BYTES_PER_ELEMENT,m=r(o,u),C=o._malloc(d);a.GetAttributeDataArrayForAllPoints(i,c,m,d,C);const E=new u(o.HEAPF32.buffer,C,f).slice();return o._free(C),{name:l,array:E,itemSize:h}}function r(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let ze;const zr=()=>{if(ze)return ze;const A="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",e="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",n=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),t=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let s=A;WebAssembly.validate(n)&&(s=e);let r;const o=WebAssembly.instantiate(a(s),{}).then(c=>{r=c.instance,r.exports.__wasm_call_ctors()});function a(c){const h=new Uint8Array(c.length);for(let f=0;f<c.length;++f){const d=c.charCodeAt(f);h[f]=d>96?d-71:d>64?d-65:d>47?d+4:d>46?63:62}let p=0;for(let f=0;f<c.length;++f)h[p++]=h[f]<60?t[h[f]]:(h[f]-60)*64+h[++f];return h.buffer.slice(0,p)}function i(c,h,p,f,d,m){const C=r.exports.sbrk,E=p+3&-4,M=C(E*f),F=C(d.length),b=new Uint8Array(r.exports.memory.buffer);b.set(d,F);const y=c(M,p,f,F,d.length);if(y===0&&m&&m(M,E,f),h.set(b.subarray(M,M+p*f)),C(M-C(0)),y!==0)throw new Error(`Malformed buffer data: ${y}`)}const l={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},u={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return ze={ready:o,supported:!0,decodeVertexBuffer(c,h,p,f,d){i(r.exports.meshopt_decodeVertexBuffer,c,h,p,f,r.exports[l[d]])},decodeIndexBuffer(c,h,p,f){i(r.exports.meshopt_decodeIndexBuffer,c,h,p,f)},decodeIndexSequence(c,h,p,f){i(r.exports.meshopt_decodeIndexSequence,c,h,p,f)},decodeGltfBuffer(c,h,p,f,d,m){i(r.exports[u[d]],c,h,p,f,r.exports[l[m]])}},ze};export{Wr as D,Vr as F,Zr as G,zr as M,Yr as O,jr as S};
