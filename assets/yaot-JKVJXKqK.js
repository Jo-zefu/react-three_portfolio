import{g as W}from"./@react-three-Bs486YIj.js";import{r as $}from"./rafor-VA4bqGKE.js";var G,H;function Q(){if(H)return G;H=1,G=I;function I(M,i,b,h){this.x=typeof M=="number"?M:0,this.y=typeof i=="number"?i:0,this.z=typeof b=="number"?b:0,this.half=typeof h=="number"?h:0}return I.prototype.contains=function(i,b,h){var t=this.half;return this.x-t<=i&&i<this.x+t&&this.y-t<=b&&b<this.y+t&&this.z-t<=h&&h<this.z+t},G}var X,J;function A(){if(J)return X;J=1;var I=Q(),M=4;X=i;function i(h){this.bounds=h,this.q0=null,this.q1=null,this.q2=null,this.q3=null,this.q4=null,this.q5=null,this.q6=null,this.q7=null,this.items=null}i.prototype.subdivide=function(){var t=this.bounds,n=t.half/2;this.q0=new i(new I(t.x-n,t.y-n,t.z-n,n)),this.q1=new i(new I(t.x+n,t.y-n,t.z-n,n)),this.q2=new i(new I(t.x-n,t.y+n,t.z-n,n)),this.q3=new i(new I(t.x+n,t.y+n,t.z-n,n)),this.q4=new i(new I(t.x-n,t.y-n,t.z+n,n)),this.q5=new i(new I(t.x+n,t.y-n,t.z+n,n)),this.q6=new i(new I(t.x-n,t.y+n,t.z+n,n)),this.q7=new i(new I(t.x+n,t.y+n,t.z+n,n))},i.prototype.insert=function(t,n,o){var q=this.q0===null;if(q){if(this.items===null?this.items=[t]:this.items.push(t),this.items.length>=M&&o<16){this.subdivide();for(var w=0;w<this.items.length;++w)this.insert(this.items[w],n,o+1);this.items=null}}else{var P=n[t],R=n[t+1],m=n[t+2],p=this.bounds,F=0;P>p.x&&(F+=1),R>p.y&&(F+=2),m>p.z&&(F+=4);var V=b(this,F);V.insert(t,n,o+1)}},i.prototype.query=function(t,n,o,q){if(o(this.bounds)){var w=this.items,P=typeof q=="function";if(w)for(var R=0;R<w.length;++R){var m=w[R];P?q(n[m],n[m+1],n[m+2])&&t.push(m):t.push(m)}this.q0&&(this.q0.query(t,n,o,q),this.q1.query(t,n,o,q),this.q2.query(t,n,o,q),this.q3.query(t,n,o,q),this.q4.query(t,n,o,q),this.q5.query(t,n,o,q),this.q6.query(t,n,o,q),this.q7.query(t,n,o,q))}};function b(h,t){if(t===0)return h.q0;if(t===1)return h.q1;if(t===2)return h.q2;if(t===3)return h.q3;if(t===4)return h.q4;if(t===5)return h.q5;if(t===6)return h.q6;if(t===7)return h.q7}return X}var j,K;function C(){if(K)return j;K=1;var I=Q(),M=A(),i=new I,b=$();j=h;function h(t){var n=[],o,q,w={initAsync:V,init:F,bounds:U,intersectRay:p,intersectSphere:R,getRoot:P};return w;function P(){return o}function R(e,s,v,l){if(!o)return n;var a=[],T=l*l;return o.query(a,q,z,x),a;function z(u){var r=T,f=u.half;return e<u.x-f?r-=m(e-(u.x-f)):e>u.x+f&&(r-=m(e-(u.x+f))),s<u.y-f?r-=m(s-(u.y-f)):s>u.y+f&&(r-=m(s-(u.y+f))),v<u.z-f?r-=m(v-(u.z-f)):v>u.z+f&&(r-=m(v-(u.z+f))),r>0}function x(u,r,f){return m(u-e)+m(r-s)+m(f-v)<T}}function m(e){return e*e}function p(e,s,v,l){if(!o)return n;v===void 0&&(v=0),l===void 0&&(l=Number.POSITIVE_INFINITY),v*=v,l*=l;var a=[];return o.query(a,q,T,z),a.sort(x);function T(u){var r=u.half,f=(u.x-r-e.x)/s.x,N=(u.x+r-e.x)/s.x,y=(u.y+r-e.y)/s.y,E=(u.y-r-e.y)/s.y,Y=(u.z-r-e.z)/s.z,_=(u.z+r-e.z)/s.z,B=Math.min(Math.min(Math.max(f,N),Math.max(y,E)),Math.max(Y,_)),S;return B<0?!1:(S=Math.max(Math.max(Math.min(f,N),Math.min(y,E)),Math.min(Y,_)),S<=B&&S<=l)}function z(u,r,f){var N=(u-e.x)*(u-e.x)+(r-e.y)*(r-e.y)+(f-e.z)*(f-e.z);return v<=N&&N<=l}function x(u,r){var f=e[u],N=e[u+1],y=e[u+2],E=(f-e.x)*(f-e.x)+(N-e.y)*(N-e.y)+(y-e.z)*(y-e.z),Y=e[r],_=e[r+1],B=e[r+2],S=(Y-e.x)*(Y-e.x)+(_-e.y)*(_-e.y)+(B-e.z)*(B-e.z);return E-S}}function F(e){Z(e),q=e,o=L(e);for(var s=0;s<e.length;s+=3)o.insert(s,q,0)}function V(e,s){Z(e);var v=L(e);b(e,l,a,{step:3});function l(T,z){v.insert(z,e,0)}function a(){q=e,o=v,typeof s=="function"&&s(w)}}function Z(e){if(!e)throw new Error("Points array is required for quadtree to work");if(typeof e.length!="number")throw new Error("Points should be array-like object");if(e.length%3!==0)throw new Error("Points array should consist of series of x,y,z coordinates and be multiple of 3")}function U(){return o?o.bounds:i}function L(e){if(e.length===0){var s=new I;return new M(s)}for(var v=Number.POSITIVE_INFINITY,l=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,T=Number.NEGATIVE_INFINITY,z=Number.NEGATIVE_INFINITY,x=Number.NEGATIVE_INFINITY,u=0;u<e.length;u+=3){var r=e[u],f=e[u+1],N=e[u+2];r<v&&(v=r),r>T&&(T=r),f<l&&(l=f),f>z&&(z=f),N<a&&(a=N),N>x&&(x=N)}var y=Math.max(Math.max(T-v,z-l),x-a);y+=2,v-=1,l-=1,a-=1;var E=y/2,Y=new I(v+E,l+E,a+E,E);return new M(Y)}}return j}var D=C();const c=W(D);export{c as y};
